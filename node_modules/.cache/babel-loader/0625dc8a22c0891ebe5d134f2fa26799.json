{"remainingRequest":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\Reset.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\Reset.vue","mtime":1611357184851},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKLy9Lb21wb25lbnRlIHp1bSBadXLDvGNrc2V0emVuIFBhc3N3b3J0IEt1bmRlCmltcG9ydCBIZWxwZXIgZnJvbSAnLi4vc2VydmljZXMvaGVscGVyLnNlcnZpY2UnOwppbXBvcnQgQXV0aCBmcm9tICcuLi9zZXJ2aWNlcy9hdXRoLnNlcnZpY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1zZzogJycsCiAgICAgIGVtYWlsOiAnJywKICAgICAgcmVzZXRQVzogZmFsc2UsCiAgICAgIHBhc3N3b3JkOiAnJywKICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiAnJwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJhY2s6IGZ1bmN0aW9uIGJhY2soKSB7CiAgICAgIEhlbHBlci5yZWRpcmVjdCgnLycpOwogICAgfSwKICAgIC8vUsO8Y2tzZXR6LUFuZnJhZ2Ugdm9uIEt1bmRlbnBhc3N3b3J0IGFuIEJhY2tlbmQgZ2VzZW5kZXQKICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMucmVzZXRQVyA9IGZhbHNlOwogICAgICB2YXIgbWFpbCA9IG5ldyBSZWdFeHAoIl5bYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcXC5bYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8pKiQiKTsKCiAgICAgIGlmIChtYWlsLnRlc3QodGhpcy5lbWFpbCkgJiYgdGhpcy5lbWFpbC5sZW5ndGggPCAxMDApIHsKICAgICAgICBBdXRoLnJlc2V0VXNlclBXKHRoaXMuZW1haWwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgIF90aGlzLm1zZyA9ICdXZW5uIGVpbiBBY2NvdW50IG1pdCBkaWVzZXIgRW1haWwgdm9yaGFuZGVuIGlzdCwgZXJoYWx0ZW4gU2llIGRhcsO8YmVyIGVpbmUgTmFjaHJpY2h0IG1pdCBBbndlaXN1bmdlbiB6dW0gWnVyw7xja3NldHplbiBJaHJlcyBQYXNzd29ydGVzJzsKICAgICAgICAgICAgX3RoaXMuZW1haWwgPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCcvJyk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5lbWFpbCA9ICcnOwogICAgICAgIHRoaXMubXNnID0gJ0ludmFsaWQgRW1haWwgZm9ybWF0JzsKICAgICAgfQogICAgfSwKICAgIC8vVmVyaWZpemllcnVuZyBuZXVlcyBQYXNzd29ydCB2b24gS3VuZGVuIGR1cmNoIEJhY2tlbmQKICAgIGNvbmZpcm1OZXdQVzogZnVuY3Rpb24gY29uZmlybU5ld1BXKCkgewogICAgICB2YXIgcGFzc1Rlc3QgPSBuZXcgUmVnRXhwKCdeKCgoPz0uKlthLXpdKSg/PS4qW0EtWl0pKXwoKD89LipbYS16XSkoPz0uKlswLTldKSl8KCg/PS4qW0EtWl0pKD89LipbMC05XSkpKSg/PS57Nix9KScpOwoKICAgICAgaWYgKHRoaXMucGFzc3dvcmQgPT0gdGhpcy5wYXNzd29yZF9jb25maXJtYXRpb24pIHsKICAgICAgICBpZiAocGFzc1Rlc3QudGVzdCh0aGlzLnBhc3N3b3JkKSAmJiB0aGlzLnBhc3N3b3JkLmxlbmd0aCA+IDUgJiYgdGhpcy5wYXNzd29yZC5sZW5ndGggPCAxMDApIHsKICAgICAgICAgIEF1dGgucmVzZXRVc2VyUFdDb25maXJtYXRpb24odGhpcy4kcm91dGUucGFyYW1zLmlkLCB0aGlzLiRyb3V0ZS5wYXJhbXMudG9rZW4sIHRoaXMucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBhbGVydCgnRGFzIFBhc3N3b3J0IHd1cmRlIGVyZm9sZ3JlaWNoIHp1csO8Y2tnZXNldHp0Jyk7CiAgICAgICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCcvbG9naW4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoJy8nKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gJyc7CiAgICAgICAgICB0aGlzLnBhc3N3b3JkX2NvbmZpcm1hdGlvbiA9ICcnOwogICAgICAgICAgcmV0dXJuIGFsZXJ0KCdQYXNzd29yZCBpcyBub3Qgc2FmZSBlbm91Z2gnKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5wYXNzd29yZCA9ICcnOwogICAgICAgIHRoaXMucGFzc3dvcmRfY29uZmlybWF0aW9uID0gJyc7CiAgICAgICAgcmV0dXJuIGFsZXJ0KCdQYXNzd29yZHMgZG8gbm90IG1hdGNoJyk7CiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQgIT0gJycgJiYgdGhpcy4kcm91dGUucGFyYW1zLnRva2VuICE9ICcnKSB7CiAgICAgIHRoaXMucmVzZXRQVyA9IHRydWU7CiAgICB9IGVsc2UgewogICAgICB0aGlzLnJlc2V0UFcgPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\Reset.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div v-if=\"!resetPW\" class=\"container\">\r\n    <h1>Geben Sie die Email ein, die mit dem Account verknüpft ist, dessen Passwort Sie zurücksetzen möchten</h1>\r\n    <hr>\r\n    <form>\r\n      <div class=\"form-group\">\r\n        <label for=\"reset-email\">Email*</label>\r\n        <input class=\"form-control\" id=\"reset-email\" type=\"email\" v-model=\"email\" required autofocus/>\r\n      </div>\r\n      <div class=\"form-group actions\">\r\n        <button class=\"btn btn-secondary\" type=\"cancel\" @click=\"back\">Zurück</button>\r\n        <button class=\"btn btn-primary\" type=\"button\" @click=\"reset\">\r\n          Reset\r\n        </button>\r\n      </div>\r\n    </form>\r\n    <h2>{{ msg }}</h2>\r\n  </div>\r\n  <div v-else class=\"container\">\r\n    <h1> Geben Sie hier Ihr neues Passwort ein </h1>\r\n    <hr>\r\n    <form>\r\n      <div class=\"form-group\">\r\n        <label for=\"reset-password\">Ihr Neues Passwort</label>\r\n        <input class=\"form-control\" id=\"reset-password\" type=\"password\" v-model=\"password\" required autofocus/>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"reset-password\">Bestätigen Sie Passwort</label>\r\n        <input class=\"form-control\" type=\"password\" v-model=\"password_confirmation\" required autofocus/>\r\n      </div>\r\n      <div class=\"form-group actions\">\r\n        <button class=\"btn btn-secondary\" type=\"cancel\" @click=\"back\">\r\n          Abbrechen\r\n        </button>\r\n        <button class=\"btn btn-primary\" type=\"button\" @click=\"confirmNewPW\">\r\n          Passwort ändern\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//Komponente zum Zurücksetzen Passwort Kunde\r\nimport Helper from '../services/helper.service'\r\nimport Auth from '../services/auth.service'\r\nexport default {\r\n  data () {\r\n    return {\r\n      msg: '',\r\n      email: '',\r\n      resetPW: false,\r\n      password: '',\r\n      password_confirmation: ''\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    back () {\r\n      Helper.redirect('/')\r\n    },\r\n    //Rücksetz-Anfrage von Kundenpasswort an Backend gesendet\r\n    reset () {\r\n      this.resetPW = false\r\n\r\n      let mail = new RegExp(\"^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$\")\r\n      if (mail.test(this.email) && this.email.length < 100) {\r\n        Auth.resetUserPW(this.email)\r\n          .then(response => {\r\n            if(response.data.success){\r\n              this.msg = 'Wenn ein Account mit dieser Email vorhanden ist, erhalten Sie darüber eine Nachricht mit Anweisungen zum Zurücksetzen Ihres Passwortes'\r\n              this.email = ''\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            Helper.handle(error)\r\n            Helper.redirect('/')\r\n          })\r\n      } else {\r\n        this.email = ''\r\n        this.msg = 'Invalid Email format'\r\n      }\r\n    },\r\n    //Verifizierung neues Passwort von Kunden durch Backend\r\n    confirmNewPW () {\r\n      let passTest = new RegExp('^(((?=.*[a-z])(?=.*[A-Z]))|((?=.*[a-z])(?=.*[0-9]))|((?=.*[A-Z])(?=.*[0-9])))(?=.{6,})')\r\n      if (this.password == this.password_confirmation) {\r\n        if (passTest.test(this.password) && this.password.length > 5 && this.password.length < 100) {\r\n          Auth.resetUserPWConfirmation(this.$route.params.id, this.$route.params.token, this.password)\r\n            .then(response => {\r\n              if(response.data.success){\r\n              alert('Das Passwort wurde erfolgreich zurückgesetzt')\r\n              Helper.redirect('/login')\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              Helper.handle(error)\r\n              Helper.redirect('/')\r\n            })\r\n        } else {\r\n          this.password = ''\r\n          this.password_confirmation = ''\r\n\r\n          return alert('Password is not safe enough')\r\n        }\r\n      } else {\r\n        this.password = ''\r\n        this.password_confirmation = ''\r\n\r\n        return alert('Passwords do not match')\r\n      }\r\n    }\r\n  },\r\n  beforeMount () {\r\n    if (this.$route.params.id != '' && this.$route.params.token != '') {\r\n      this.resetPW = true\r\n    } else {\r\n      this.resetPW = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n</style>\r\n"],"sourceRoot":""}]}