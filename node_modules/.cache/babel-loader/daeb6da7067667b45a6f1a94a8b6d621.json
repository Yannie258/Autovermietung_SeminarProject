{"remainingRequest":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\BestellungenMa.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\BestellungenMa.vue","mtime":1609762382419},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZXZlcnkuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9jb2FuaC9PbmVEcml2ZS9Eb2N1bWVudHMvU1ctUHJvamVrdC9BdXRvL0F1dG92ZXJtaWV0dW5nL0F1dG92ZXJtaWV0dW5nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8gSGllciB3aXJkIGZ1ZXIgTWl0YXJiZWl0ZXIvQWRtaW4gYWxsZXMgYnpnbC4gQmVzdGVsbHVuZ2VuIGFuZ2V6ZWlndC9kZWZpbmllcnQKaW1wb3J0IFVzZXJTZXJ2aWNlIGZyb20gIi4uL3NlcnZpY2VzL3VzZXIuc2VydmljZSI7CmltcG9ydCBBdXRoIGZyb20gIi4uL3NlcnZpY2VzL2F1dGguc2VydmljZSI7CmltcG9ydCBIZWxwZXIgZnJvbSAiLi4vc2VydmljZXMvaGVscGVyLnNlcnZpY2UiOwppbXBvcnQgRGF0ZXBpY2tlckxpdGUgZnJvbSAiLi9EYXRlcGlja2VyTGl0ZS52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgcmV0dXJuIHsKICAgICAgYXVzZ2V3YWVobHQ6IGZhbHNlLAogICAgICBtc2c6ICcnLAogICAgICBiZXN0ZWxsdW5nZW46IFtdLAogICAgICBnZXN1Y2h0ZUJlc3RlbGx1bmdlbjogW10sCiAgICAgIGdld2FlaGx0ZUJlc3RlbGx1bmc6ICcnLAogICAgICBzY2hhZWRlbjogW10sCiAgICAgIGJlc3RlbGxrb3N0ZW46IFtdLAogICAgICBjbGFzczogJycsCiAgICAgIGJlc3RlbGx1bmdzYXVzd2FobDogJycsCiAgICAgIGJlc3RlbGx1bmdzdHlwZW46IFtdLAogICAgICBhdXRvOiAnJywKICAgICAgYm5yOiAnJywKICAgICAgdm9ybmFtZTogJycsCiAgICAgIG5hY2huYW1lOiAnJywKICAgICAgZXJzdGVsbGRhdHVtOiAnJywKICAgICAgc3RhcnQ6ICcnLAogICAgICBlbmRlOiAnJywKICAgICAgZGF0ZXBpY2tlclNldHRpbmc6IHsKICAgICAgICB2YWx1ZTogIiIsCiAgICAgICAgeWVhck1pbnVzOiAwLAogICAgICAgIGZyb206ICIiLAogICAgICAgIHRvOiAiMTk5OS8wMS8wMSIsCiAgICAgICAgZGlzYWJsZWREYXRlOiBbXSwKICAgICAgICBsb2NhbGU6IHsKICAgICAgICAgIGZvcm1hdDogIllZWVkvTU0vREQiLAogICAgICAgICAgd2Vla2RheTogWyJTb24iLCAiTW9uIiwgIkRpZW4iLCAiTWl0IiwgIkRvbiIsICJGcmVpIiwgIlNhbSJdLAogICAgICAgICAgdG9kYXlCdG46ICJIZXV0ZSIsCiAgICAgICAgICBjbGVhckJ0bjogIkzDtnNjaGVuIiwKICAgICAgICAgIGNsb3NlQnRuOiAiU2NobGllc3NlbiIKICAgICAgICB9LAogICAgICAgIGNoYW5nZUV2ZW50OiBmdW5jdGlvbiBjaGFuZ2VFdmVudCh2YWx1ZSkgewogICAgICAgICAgX3RoaXMuc3RhcnQgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIC8vZW5kZGF0dW0KICAgICAgZGF0ZXBpY2tlclNldHRpbmcyOiB7CiAgICAgICAgdmFsdWU6ICIiLAogICAgICAgIHllYXJNaW51czogMCwKICAgICAgICBmcm9tOiAiIiwKICAgICAgICB0bzogIjE5OTkvMDEvMDEiLAogICAgICAgIGRpc2FibGVkRGF0ZTogW10sCiAgICAgICAgbG9jYWxlOiB7CiAgICAgICAgICBmb3JtYXQ6ICJZWVlZL01NL0REIiwKICAgICAgICAgIHdlZWtkYXk6IFsiU29uIiwgIk1vbiIsICJEaWVuIiwgIk1pdCIsICJEb24iLCAiRnJlaSIsICJTYW0iXSwKICAgICAgICAgIHRvZGF5QnRuOiAiSGV1dGUiLAogICAgICAgICAgY2xlYXJCdG46ICJMw7ZzY2hlbiIsCiAgICAgICAgICBjbG9zZUJ0bjogIlNjaGxpZXNzZW4iCiAgICAgICAgfSwKICAgICAgICBjaGFuZ2VFdmVudDogZnVuY3Rpb24gY2hhbmdlRXZlbnQodmFsdWUpIHsKICAgICAgICAgIF90aGlzLmVuZGUgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBEYXRlcGlja2VyTGl0ZTogRGF0ZXBpY2tlckxpdGUKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIGRhdGVuIG5ldSBsYWRlbiBiencuIGJlc3RpbW10ZSBiZXN0ZWxsdW5nc3R5cGVuIGFuemVpZ2VuCiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuYmVzdGVsbHVuZ3NhdXN3YWhsID09ICcnKSB7CiAgICAgICAgYWxlcnQoIkJpdHRlIHdhZWhsZW4gU2llIGVpbmVuIEZpbHRlciBhdXMiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuYmVzdGVsbHVuZ2VuID0gW107CiAgICAgIHRoaXMuZ2VzdWNodGVCZXN0ZWxsdW5nZW4gPSBbXTsKICAgICAgdmFyIHR5cCA9IC0xOwogICAgICBpZiAodGhpcy5iZXN0ZWxsdW5nc2F1c3dhaGwgPT0gIk9mZmVuZSBCZXN0ZWxsYW5mcmFnZW4iKSB0eXAgPSAwO2Vsc2UgaWYgKHRoaXMuYmVzdGVsbHVuZ3NhdXN3YWhsID09ICJCZXN0ZWxsdW5nc2hpc3RvcmllIikgdHlwID0gNzsgLy8zIHUuIDQKICAgICAgZWxzZSBpZiAodGhpcy5iZXN0ZWxsdW5nc2F1c3dhaGwgPT0gIk9mZmVuZSBCZXphaGx1bmciKSB0eXAgPSAyO2Vsc2UgaWYgKHRoaXMuYmVzdGVsbHVuZ3NhdXN3YWhsID09ICJVZWJlcnpvZ2VuZSBCZXN0ZWxsdW5nZW4iKSB0eXAgPSA1O2Vsc2UgaWYgKHRoaXMuYmVzdGVsbHVuZ3NhdXN3YWhsID09ICJMYXVmZW5kZSBCZXN0ZWxsdW5nZW4iKSB0eXAgPSAxO2Vsc2UgaWYgKHRoaXMuYmVzdGVsbHVuZ3NhdXN3YWhsID09ICJEb3BwZWx0ZSBCZXN0ZWxsdW5nZW4iKSB0eXAgPSA2O2Vsc2UgaWYgKHRoaXMuYmVzdGVsbHVuZ3NhdXN3YWhsID09ICJBbGxlIEJlc3RlbGx1bmdlbiIpIHR5cCA9IDg7CiAgICAgIHRoaXMuaG9sZUJlc3RlbGx1bmdlbih0eXApOwogICAgfSwKICAgIC8vIGJlc3RpbW10ZSBiZXN0ZWxsdW5nZW4gc3VjaGVuCiAgICBzdWNoZW46IGZ1bmN0aW9uIHN1Y2hlbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmdlc3VjaHRlQmVzdGVsbHVuZ2VuID0gdGhpcy5iZXN0ZWxsdW5nZW4uZmlsdGVyKGZ1bmN0aW9uIChiZXN0ZWxsdW5nKSB7CiAgICAgICAgdmFyIGJuciA9IGZhbHNlOwogICAgICAgIHZhciBuYW1lID0gZmFsc2U7CiAgICAgICAgdmFyIGRhdHVtID0gZmFsc2U7CiAgICAgICAgdmFyIHN0YXJ0ZGF0dW0gPSBuZXcgRGF0ZShfdGhpczIuc3RhcnQpOwogICAgICAgIHZhciBlbmRkYXR1bSA9IG5ldyBEYXRlKF90aGlzMi5lbmRlKTsKICAgICAgICB2YXIgemVpdHN0ZW1wZWwgPSBuZXcgRGF0ZShiZXN0ZWxsdW5nLnplaXRzdGVtcGVsKTsKCiAgICAgICAgaWYgKF90aGlzMi5ibnIgPT0gIiIpIHsKICAgICAgICAgIGJuciA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJuciA9IGJlc3RlbGx1bmcuYm5yID09IF90aGlzMi5ibnI7CiAgICAgICAgfQoKICAgICAgICBpZiAoX3RoaXMyLnZvcm5hbWUgPT0gIiIgfHwgX3RoaXMyLm5hY2huYW1lID09ICIiKSB7CiAgICAgICAgICBuYW1lID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgbmFtZSA9IF90aGlzMi52b3JuYW1lLnRvTG93ZXJDYXNlKCkuc3BsaXQoIiAiKS5ldmVyeShmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIGJlc3RlbGx1bmcudm9ybmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHYpOwogICAgICAgIH0pICYmIF90aGlzMi5uYWNobmFtZS50b0xvd2VyQ2FzZSgpLnNwbGl0KCIgIikuZXZlcnkoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiBiZXN0ZWxsdW5nLm5hY2huYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModik7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChfdGhpczIuc3RhcnQgPT0gJycgJiYgX3RoaXMyLmVuZGUgPT0gJycgfHwgc3RhcnRkYXR1bS5nZXRUaW1lKCkgPiBlbmRkYXR1bS5nZXRUaW1lKCkpIHsKICAgICAgICAgIGRhdHVtID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgaWYgKF90aGlzMi5lbmRlID09ICcnKSB7CiAgICAgICAgICBpZiAoc3RhcnRkYXR1bS5nZXRUaW1lKCkgPT0gemVpdHN0ZW1wZWwuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgIGRhdHVtID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdHVtID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChfdGhpczIuc3RhcnQgPT0gJycpIHsKICAgICAgICAgIGlmIChlbmRkYXR1bS5nZXRUaW1lKCkgPT0gemVpdHN0ZW1wZWwuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgIGRhdHVtID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRhdHVtID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChzdGFydGRhdHVtLmdldFRpbWUoKSA8PSB6ZWl0c3RlbXBlbC5nZXRUaW1lKCkgJiYgZW5kZGF0dW0uZ2V0VGltZSgpID49IHplaXRzdGVtcGVsLmdldFRpbWUoKSkgewogICAgICAgICAgICBkYXR1bSA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXR1bSA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGJuciAmJiBuYW1lICYmIGRhdHVtOwogICAgICB9KTsKICAgIH0sCiAgICAvLyB6dXJ1ZWNrIHp1ciBhbGxnZW1laW5lbiBCZXN0ZWxsdWV1YmVyc2ljaHQKICAgIGJhY2s6IGZ1bmN0aW9uIGJhY2soKSB7CiAgICAgIHRoaXMuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgdGhpcy5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2FkbWluL2Jlc3RlbGx1bmdlbiIpOwogICAgfSwKICAgIGhvbWU6IGZ1bmN0aW9uIGhvbWUoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvYWRtaW4iKTsKICAgIH0sCiAgICBzaG93RGFtYWdlOiBmdW5jdGlvbiBzaG93RGFtYWdlKGJlc3RlbGx1bmcpIHsKICAgICAgLy8gdm9yIGJlc3RhZXRpZ3VuZyBiZWhhbmRsdW5nIHNjaGFlZGVuCiAgICAgIGlmIChiZXN0ZWxsdW5nLnN0YXR1cyA9PSAwKSB7CiAgICAgICAgSGVscGVyLnJlZGlyZWN0KCIvYWRtaW4vIiArIGJlc3RlbGx1bmcuYXV0b19mayArICIvc2NoYWRlbiIpOwogICAgICB9IC8vIG9mZmVuZSBvZGVyIHplaXRsaWNoIHVlYmVyZmFlbGxpZ2UgYmVzdGVsbHVuZ2VuCiAgICAgIGVsc2UgaWYgKGJlc3RlbGx1bmcuc3RhdHVzID09IDEgfHwgYmVzdGVsbHVuZy5zdGF0dXMgPT0gNSB8fCBiZXN0ZWxsdW5nLnN0YXR1cyA9PSAyKSB7CiAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi8iICsgYmVzdGVsbHVuZy5hdXRvX2ZrICsgIi9zY2hhZGVuIiArICIvIiArIGJlc3RlbGx1bmcuYm5yKTsKICAgICAgICB9CiAgICB9LAogICAgYWJicmVjaGVuOiBmdW5jdGlvbiBhYmJyZWNoZW4oYm5yLCBza2lwLCBhdXRvLCBiZXN0ZWxsa29zdGVuKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIGJlc3RhZXRpZ2VuID0gZmFsc2U7CgogICAgICBpZiAoIXNraXApIHsKICAgICAgICBiZXN0YWV0aWdlbiA9IGNvbmZpcm0oIk1vZWNodGVuIFNpZSBkaWUgQmVzdGVsbHVuZyBCTlI6ICIgKyBibnIgKyAiIHdpcmtsaWNoIGFiYnJlY2hlbj8iKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBiZXN0YWV0aWdlbiA9IHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChiZXN0YWV0aWdlbikgewogICAgICAgIHZhciBiZXN0ZWxsdW5nID0gMDsKCiAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5ibnIgPT0gIScnKSB7CiAgICAgICAgICBiZXN0ZWxsdW5nID0gdGhpcy5nZXdhZWhsdGVCZXN0ZWxsdW5nOwogICAgICAgICAgYmVzdGVsbGtvc3RlbiA9IHRoaXMuYmVzdGVsbGtvc3RlbjsKICAgICAgICAgIGF1dG8gPSB0aGlzLmF1dG87CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGJlc3RlbGx1bmcgPSB0aGlzLmJlc3RlbGx1bmdlbi5maW5kKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJuciA9PSBibnI7CiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIHdlbm4gdm9yIGF1c2xlaWhlIGRlcyBhdXRvcyB2b3Igb3J0IHByb2JsZW1lIG1pdCBrdW5kZW4gKHouYi4ga2FubiBuaWNodCBiZXphaGxlbiksIGRhbm4gYWJicnVjaCBtaXQgc3RyYWZ6YWhsdW5nCgoKICAgICAgICBpZiAoYXV0by5hdXNnZWxpZWhlbiA9PSAwICYmIGJlc3RlbGx1bmcuc3RhdHVzID09IDEpIHsKICAgICAgICAgIC8vU3RyYWZlIGluIEZvcm0gdm9uIDMwJSBkZXIgQmVzdGVsbGtvc3RlbiBkZXMgenUgbWlldGVuZGVuIEF1dG9zIAogICAgICAgICAgdmFyIGtvc3RlbiA9IDA7CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiZXN0ZWxsa29zdGVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChiZXN0ZWxsa29zdGVuW2ldLnR5cCAhPSAwKSB7CiAgICAgICAgICAgICAga29zdGVuID0gYmVzdGVsbGtvc3RlbltpXS5tZW5nZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICghc2tpcCkgYWxlcnQoIkVzIHdpcmQgd2VnZW4gZGVyIGt1cnpmcmlzdGlnbiBBYnNhZ2UgZWluZSBTdHJhZnphaGx1bmcgaW4gSG9laGUgdm9uICIgKyBrb3N0ZW4gLyAxMDAgKiAzMCArICLigqwgZmFlbGxpZyIpOwogICAgICAgICAgYmVzdGVsbHVuZy5zdGF0dXMgPSAyOwogICAgICAgICAgQXV0aC51cGRhdGVTdGF0dXNPcmRlcihibnIsIDIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBBdXRoLmFkZENvc3QoYm5yLCAyLCBrb3N0ZW4gLyAxMDAgKiAzMCwgJ1N0cmFma29zdGVuIGZ1ZXIgUHJvYmxlbSBiZWkgQWJob2x1bmcgZGVzIEF1dG9zJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMy4kcm91dGUucGFyYW1zLmJuciA9PSAhJycpIHsKICAgICAgICAgICAgICAgICAgICAvLyBkYXRlbiBha3R1YWxpc2llcmVuLCBpbmRlbSBpbiBhcnJheSBlaW5nZWZ1ZWd0CiAgICAgICAgICAgICAgICAgICAgX3RoaXMzLmJlc3RlbGxrb3N0ZW4ucHVzaChyZXNwb25zZS5kYXRhLmNvc3QpOwogICAgICAgICAgICAgICAgICB9IC8vIFN0YW5kYXJrb3N0ZW4gbG9lc2NoZW4sIGRhIEt1bmRlIG5pZSBhdXRvIGF1c2dlbGllaGVuIGhhdAoKCiAgICAgICAgICAgICAgICAgIEF1dGguZGVsZXRlQ29zdChibnIsIDAsIG51bGwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzMy4kcm91dGUucGFyYW1zLmJuciA9PSAhJycpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGF0ZW4gYWt0dWFsaXNpZXJlbiwgaW5kZW0gYXVzIGFycmF5IGdlbG9lc2NodCAKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IF90aGlzMy5iZXN0ZWxsa29zdGVuLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczMuYmVzdGVsbGtvc3RlbltfaV0udHlwID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMy5iZXN0ZWxsa29zdGVuLnNwbGljZShfaSwgMSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICBfdGhpczMuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBfdGhpczMubXNnID0gIkFsbGUgQmVzdGVsbHVuZ2VuIjsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgICAgICAgIF90aGlzMy5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMzLm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgICAgICBfdGhpczMuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMzLm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbiIpOwogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIEF1dGgudXBkYXRlU3RhdHVzT3JkZXIoYm5yLCAzKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzMy4kcm91dGUucGFyYW1zLmJuciAhPSAiIikgewogICAgICAgICAgICAgICAgX3RoaXMzLmdld2FlaGx0ZUJlc3RlbGx1bmcuc3RhdHVzID0gMzsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzMy5iZXN0ZWxsdW5nZW4uZmluZChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuYm5yID09IGJucjsKICAgICAgICAgICAgICB9KS5zdGF0dXMgPSAzOwogICAgICAgICAgICAgIGlmICghc2tpcCkgYWxlcnQoIkJlc3RlbGx1bmcgd3VyZGUgZXJmb2xncmVpY2ggYWJnZWJyb2NoZW4uIik7CiAgICAgICAgICAgICAgX3RoaXMzLmF1c2dld2FlaGx0ID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXMzLm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCIvYWRtaW4vYmVzdGVsbHVuZ2VuIik7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgSGVscGVyLmhhbmRsZShlcnJvcik7CiAgICAgICAgICAgIF90aGlzMy5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczMubXNnID0gIkFsbGUgQmVzdGVsbHVuZ2VuIjsKICAgICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCIvYWRtaW4vYmVzdGVsbHVuZ2VuIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vQmVzdGVsbHVuZyBha3plcHRpZXJlbiAtLT4gMCB6dSAxCiAgICBhY2NlcHRPcmRlcjogZnVuY3Rpb24gYWNjZXB0T3JkZXIoYm5yKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdmFyIGJlc3RlbGx1bmcgPSB0aGlzLmJlc3RlbGx1bmdlbi5maW5kKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgcmV0dXJuIGVsZW1lbnQuYm5yID09IGJucjsKICAgICAgfSk7CiAgICAgIHZhciBkYXRlID0gYmVzdGVsbHVuZzsgLy91ZWJlcnBydWVmdW5nLCBvYiBkb3BwZWx0ZSBiZXN0ZWxsdW5nZW4KCiAgICAgIGlmIChiZXN0ZWxsdW5nLmRvcHBlbHQpIHsKICAgICAgICB2YXIgZG9wcGVsdCA9IFtiZXN0ZWxsdW5nXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJlc3RlbGx1bmdlbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKGJlc3RlbGx1bmcuYm5yID09IHRoaXMuYmVzdGVsbHVuZ2VuW2ldLmJucikgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoYmVzdGVsbHVuZy5hdXRvX2ZrID09IHRoaXMuYmVzdGVsbHVuZ2VuW2ldLmF1dG9fZmsgJiYgdGhpcy5iZXN0ZWxsdW5nZW5baV0uZG9wcGVsdCkgewogICAgICAgICAgICBkb3BwZWx0LnB1c2godGhpcy5iZXN0ZWxsdW5nZW5baV0pOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZm9yICh2YXIgX2kyID0gMTsgX2kyIDwgZG9wcGVsdC5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgICBhbGVydCgiRGllIEJlc3RlbGx1bmcgQk5SOiAiICsgZG9wcGVsdFtfaTJdLmJuciArICIgdWViZXJzY2huZWlkZXQgc2ljaCBtaXQgZGllc2VyIEJlc3RlbGx1bmciKTsKICAgICAgICB9CgogICAgICAgIGZvciAodmFyIF9pMyA9IDE7IF9pMyA8IGRvcHBlbHQubGVuZ3RoIC0gMTsgX2kzKyspIHsKICAgICAgICAgIHZhciBkMSA9IG5ldyBEYXRlKGRvcHBlbHRbX2kzXS56ZWl0c3RlbXBlbCk7CiAgICAgICAgICB2YXIgZDIgPSBuZXcgRGF0ZShkb3BwZWx0W19pMyArIDFdLnplaXRzdGVtcGVsKTsKCiAgICAgICAgICBpZiAoZDEuZ2V0VGltZSgpIDwgZDIuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgIGRhdGUgPSBkb3BwZWx0W19pM107CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRlID0gZG9wcGVsdFtfaTMgKyAxXTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChjb25maXJtKCJTb2xsIGRpZSBmcnVlaGVzdGUgQmVzdGVsbHVuZyBCTlI6ICIgKyBkYXRlLmJuciArICIgYWt6ZXB0aWVydCB1bmQgYXV0b21hdGlzY2ggZGllIGFuZGVyZW4gQW5mcmFnZW4gYWJnZWJyb2NoZW4gd2VyZGVuPyIpKSB7CiAgICAgICAgICBkb3BwZWx0LmZvckVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGl0ZW0pIHsKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShpdGVtLmJuciA9PSBkYXRlLmJucikpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczQuYWJicmVjaGVuKGl0ZW0uYm5yLCAxKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICB9OwogICAgICAgICAgfSgpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQoKICAgICAgVXNlclNlcnZpY2UuZ2V0U2NoYWVkZW4oZGF0ZS5hdXRvX2ZrKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIHdlbm4ga2VpbiBzY2hhZGVuLCBkYW5uIGthbm4gYmVzdGVsbHVuZyBiZXN0YWV0aWd0IHdlcmRlbgogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIEF1dGgudXBkYXRlU3RhdHVzT3JkZXIoZGF0ZS5ibnIsIDEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICBfdGhpczQuYmVzdGVsbHVuZ2VuLmZpbmQoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJuciA9PSBkYXRlLmJucjsKICAgICAgICAgICAgICB9KS5zdGF0dXMgPSAxOwogICAgICAgICAgICAgIGFsZXJ0KCJCZXN0ZWxsdW5nIHd1cmRlIGVyZm9sZ3JlaWNoIGJlc3RhZXRpZ3QuIik7CiAgICAgICAgICAgICAgX3RoaXM0LmF1c2dld2FlaGx0ID0gZmFsc2U7CiAgICAgICAgICAgICAgX3RoaXM0Lm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCIvYWRtaW4vYmVzdGVsbHVuZ2VuIik7CiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgSGVscGVyLmhhbmRsZShlcnJvcik7CiAgICAgICAgICAgIF90aGlzNC5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgICAgICBfdGhpczQubXNnID0gIkFsbGUgQmVzdGVsbHVuZ2VuIjsKICAgICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCIvYWRtaW4vYmVzdGVsbHVuZ2VuIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0pOwogICAgICAgIH0gLy8gb2ZmZW5lIHNjaGFlZGVuIHNpbmQgdm9yaGFuZGVuCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhciB2YWwgPSBmYWxzZTsKCiAgICAgICAgICAgIF90aGlzNC5zY2hhZWRlbi5wdXNoLmFwcGx5KF90aGlzNC5zY2hhZWRlbiwgcmVzcG9uc2UuZGF0YS5jYXJkYW1hZ2UpOwoKICAgICAgICAgICAgZm9yICh2YXIgX2k0ID0gMDsgX2k0IDwgX3RoaXM0LnNjaGFlZGVuLmxlbmd0aDsgX2k0KyspIHsKICAgICAgICAgICAgICBpZiAoX3RoaXM0LnNjaGFlZGVuW19pNF0ucHJpb3JpdGFldCA9PSAwKSB7CiAgICAgICAgICAgICAgICBpZiAoY29uZmlybSgiRGFzIEF1dG8ga2FubiBuaWNodCBhdXNnZWxpZWhlbiB3ZXJkZW4gd2VnZW4gb2ZmZW5lciBmYXRhbGVyIFByb2JsZW1lLlxuTW9lY2h0ZW4gU2llIGRpZXNlIGpldHp0IGJlYXJiZWl0ZW4/IikpIHsKICAgICAgICAgICAgICAgICAgdmFsID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCIvYWRtaW4vIiArIGRhdGUuYXV0b19mayArICIvc2NoYWRlbiIpOwogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFsID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICghdmFsKSB7CiAgICAgICAgICAgICAgaWYgKGNvbmZpcm0oIkVzIGJlc3RlaGVuIG5vY2ggb2ZmZW5lIFByb2JsZW1lLCBkaWUgYWJlciBuaWNodCBmYXRhbCBzaW5kLiBNb2VjaHRlbiBTaWUgZGllIEJlc3RlbGx1bmcgYmVzdGFldGlnZW4iKSkgewogICAgICAgICAgICAgICAgQXV0aC51cGRhdGVTdGF0dXNPcmRlcihkYXRlLmJuciwgMSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgICAgICAgIF90aGlzNC5iZXN0ZWxsdW5nZW4uZmluZChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuYm5yID09IGRhdGUuYm5yOwogICAgICAgICAgICAgICAgICAgIH0pLnN0YXR1cyA9IDE7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIkJlc3RlbGx1bmcgd3VyZGUgZXJmb2xncmVpY2ggYmVzdGFldGlndC4iKTsKICAgICAgICAgICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgICAgICAgICAgICBfdGhpczQuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBfdGhpczQubXNnID0gIkFsbGUgQmVzdGVsbHVuZ2VuIjsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgICAgICAgICAgX3RoaXM0LmF1c2dld2FlaGx0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIF90aGlzNC5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgIF90aGlzNC5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgIF90aGlzNC5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbiIpOwogICAgICB9KTsKICAgIH0sCiAgICBmaW5pc2hPcmRlcjogZnVuY3Rpb24gZmluaXNoT3JkZXIoYm5yKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgaWYgKGNvbmZpcm0oIk1vZWNodGVuIFNpZSBkaWUgQmVzdGVsbHVuZyB3aXJrbGljaCBhYnNjaGxpZXNzZW4/IEhhYmVuIFNpZSBhdWNoIGRhcyBBdXRvIGF1ZiBuZXVlIFNjaGFlZGVuIGJlZ3V0YWNodGV0PyIpKSB7CiAgICAgICAgdmFyIHp1c2F0eiA9IDA7CiAgICAgICAgdmFyIGJlc3RhZXRpZ2VuID0gZmFsc2U7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iZXN0ZWxsa29zdGVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBpZiAodGhpcy5iZXN0ZWxsa29zdGVuW2ldLnR5cCAhPSAwKSB7CiAgICAgICAgICAgIHp1c2F0eiArPSB0aGlzLmJlc3RlbGxrb3N0ZW5baV0ubWVuZ2U7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoenVzYXR6ID4gMCkgewogICAgICAgICAgaWYgKGNvbmZpcm0oIkVzIHNpbmQgbm9jaCBvZmZlbmUgWnVzYXR6a29zdGVuIGluIEhvZWhlIHZvbiAiICsgenVzYXR6ICsgIuKCrCB6dSB6YWhsZW4uXG5XdXJkZW4gZGllc2UgYmV6YWhsdD8iKSkgewogICAgICAgICAgICBiZXN0YWV0aWdlbiA9IHRydWU7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBiZXN0YWV0aWdlbiA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBiZXN0YWV0aWdlbiA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBpZiAoYmVzdGFldGlnZW4pIHsKICAgICAgICAgIEF1dGgudXBkYXRlU3RhdHVzT3JkZXIoYm5yLCA0KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgQXV0aC51cGRhdGVBdXNsZWloZUF1dG8oX3RoaXM1LmF1dG8ubmFtZSwgMCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgX3RoaXM1Lmdld2FlaGx0ZUJlc3RlbGx1bmcuc3RhdHVzID0gNDsKICAgICAgICAgICAgICAgICAgX3RoaXM1LmF1dG8uYXVzZ2VsaWVoZW4gPSAwOwogICAgICAgICAgICAgICAgICBhbGVydCgiQXV0byB3dXJkZSBlcmZvbGdyZWljaCB6dXJ1ZWNrZ2VnZWJlbiIpOwogICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgICAgICAgIF90aGlzNS5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXM1Lm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgICAgICBfdGhpczUuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXM1Lm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbiIpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5ydWVja2dhYmUoYm5yKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyA1IHp1IDIsIHVtIHdlaXRlcmUgVmVyc3BhZXR1bmdzZ2VidWVocmVuIHp1IHZlcmhpbmRlcm4gYnp3LiB3ZW5uIFp1c2F0emtvc3RlbiBuaWNodCBkaXJla3QgZHVyY2ggS3VuZGVuIGJlemFobHQgd2VyZGVuIGtvZW5uZW4gKDEtLT4yKQogICAgcnVlY2tnYWJlOiBmdW5jdGlvbiBydWVja2dhYmUoYm5yKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKGNvbmZpcm0oIld1cmRlIGRhcyBBdXRvIHdpcmtsaWNrIHZvbSBLdW5kZW4genVydWVja2dlZ2ViZW4/IikpIHsKICAgICAgICBBdXRoLnVwZGF0ZVN0YXR1c09yZGVyKGJuciwgMikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgQXV0aC51cGRhdGVBdXNsZWloZUF1dG8oX3RoaXM2LmF1dG8ubmFtZSwgMCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICBfdGhpczYuZ2V3YWVobHRlQmVzdGVsbHVuZy5zdGF0dXMgPSAyOwogICAgICAgICAgICAgICAgX3RoaXM2LmF1dG8uYXVzZ2VsaWVoZW4gPSAwOwogICAgICAgICAgICAgICAgYWxlcnQoIkF1dG8gd3VyZGUgZXJmb2xncmVpY2ggenVydWVja2dlZ2ViZW4iKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgICAgICAgIF90aGlzNi5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgICAgICAgIF90aGlzNi5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbiIpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgIF90aGlzNi5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgICAgX3RoaXM2Lm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIG1pdGFyYmVpdGVyIGJlc3RhZXRpZ3QgZGllcywgd2VubiBhdXRvIGF1c2dlbGllaGVuIHUuIGt1bmRlIHN0YW5kYXJrb3N0ZW4gdm9yIG9ydCBiZXphaGx0IGhhdAogICAgYXVzbGVpaGVuOiBmdW5jdGlvbiBhdXNsZWloZW4oYXV0bykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciBnZXNhbXQgPSAwOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJlc3RlbGxrb3N0ZW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBnZXNhbXQgKz0gdGhpcy5iZXN0ZWxsa29zdGVuW2ldLm1lbmdlOwogICAgICB9CgogICAgICBpZiAoY29uZmlybSgiV3VyZGVuIGRpZSBLb3N0ZW4gaW4gSG9laGUgdm9uICIgKyBnZXNhbXQgKyAi4oKsIGJlemFobHQgdW5kIGlzdCBkYXMgQXV0byBiZXJlaXQgZnVlciBkaWUgQXVzbGVpaGU/IikpIHsKICAgICAgICBBdXRoLnVwZGF0ZUF1c2xlaWhlQXV0byhhdXRvLCAxKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgICBhbGVydCgiRGFzIEF1dG8ga2FubiBudW4gYXVzZ2VsaWVoZW4gd2VyZGVuIik7CiAgICAgICAgICAgIF90aGlzNy5hdXRvLmF1c2dlbGllaGVuID0gMTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgSGVscGVyLmhhbmRsZShlcnJvcik7CiAgICAgICAgICBfdGhpczcuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgIF90aGlzNy5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgICAgSGVscGVyLnJlZGlyZWN0KCIvYWRtaW4vYmVzdGVsbHVuZ2VuIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyB0ZXN0LCBvYiBiZXN0ZWxsdW5nZW4gbWVocmZhY2ggdm9yaGFuZGVuIHNpbmQKICAgIHRlc3Rkb3BwZWx0OiBmdW5jdGlvbiB0ZXN0ZG9wcGVsdCgpIHsKICAgICAgdmFyIHZlcmdsaWNoZW4gPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iZXN0ZWxsdW5nZW4ubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgdmFyIHZhbHVlID0gZmFsc2U7CgogICAgICAgIGlmICh0aGlzLmJlc3RlbGx1bmdlbltpXS5zdGF0dXMgIT0gMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZlcmdsaWNoZW4ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICh2ZXJnbGljaGVuW2pdLmF1dG9fZmsgPT0gdGhpcy5iZXN0ZWxsdW5nZW5baV0uYXV0b19maykgewogICAgICAgICAgICB2YWx1ZSA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CgogICAgICAgIHZlcmdsaWNoZW4ucHVzaCh0aGlzLmJlc3RlbGx1bmdlbltpXSk7CgogICAgICAgIGlmICh0aGlzLmJlc3RlbGx1bmdlbltpXS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgZm9yICh2YXIgaCA9IGkgKyAxOyBoIDwgdGhpcy5iZXN0ZWxsdW5nZW4ubGVuZ3RoOyBoKyspIHsKICAgICAgICAgICAgaWYgKHRoaXMuYmVzdGVsbHVuZ2VuW2ldLmF1dG9fZmsgPT0gdGhpcy5iZXN0ZWxsdW5nZW5baF0uYXV0b19mayAmJiB0aGlzLmJlc3RlbGx1bmdlbltoXS5zdGF0dXMgPT0gMCkgewogICAgICAgICAgICAgIHZlcmdsaWNoZW4ucHVzaCh0aGlzLmJlc3RlbGx1bmdlbltoXSk7CiAgICAgICAgICAgICAgdmFyIHN0YXJ0ZGF0dW0gPSBuZXcgRGF0ZSh0aGlzLmJlc3RlbGx1bmdlbltpXS5zdGFydGRhdHVtKTsKICAgICAgICAgICAgICB2YXIgZW5kZGF0dW0gPSBuZXcgRGF0ZSh0aGlzLmJlc3RlbGx1bmdlbltpXS5lbmRkYXR1bSk7CiAgICAgICAgICAgICAgdmFyIHZvbiA9IG5ldyBEYXRlKHRoaXMuYmVzdGVsbHVuZ2VuW2hdLnN0YXJ0ZGF0dW0pOwogICAgICAgICAgICAgIHZhciBiaXMgPSBuZXcgRGF0ZSh0aGlzLmJlc3RlbGx1bmdlbltoXS5lbmRkYXR1bSk7CgogICAgICAgICAgICAgIGlmIChlbmRkYXR1bS5nZXRUaW1lKCkgPj0gdm9uLmdldFRpbWUoKSB8fCBlbmRkYXR1bS5nZXRUaW1lKCkgPj0gYmlzLmdldFRpbWUoKSkgewogICAgICAgICAgICAgICAgdGhpcy5iZXN0ZWxsdW5nZW5baV0uZG9wcGVsdCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmJlc3RlbGx1bmdlbltoXS5kb3BwZWx0ID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0ZGF0dW0uZ2V0VGltZSgpIDw9IHZvbi5nZXRUaW1lKCkgfHwgc3RhcnRkYXR1bS5nZXRUaW1lKCkgPD0gYmlzLmdldFRpbWUoKSkgewogICAgICAgICAgICAgICAgdGhpcy5iZXN0ZWxsdW5nZW5baV0uZG9wcGVsdCA9IHRydWU7CiAgICAgICAgICAgICAgICB0aGlzLmJlc3RlbGx1bmdlbltoXS5kb3BwZWx0ID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXJ0ZGF0dW0uZ2V0VGltZSgpIDw9IHZvbi5nZXRUaW1lKCkgJiYgZW5kZGF0dW0uZ2V0VGltZSgpID49IHZvbi5nZXRUaW1lKCkgfHwgc3RhcnRkYXR1bS5nZXRUaW1lKCkgPD0gYmlzLmdldFRpbWUoKSAmJiBlbmRkYXR1bS5nZXRUaW1lKCkgPj0gYmlzLmdldFRpbWUoKSB8fCBzdGFydGRhdHVtLmdldFRpbWUoKSA+PSB2b24uZ2V0VGltZSgpICYmIGVuZGRhdHVtLmdldFRpbWUoKSA8PSBiaXMuZ2V0VGltZSgpKSB7CiAgICAgICAgICAgICAgICB0aGlzLmJlc3RlbGx1bmdlbltpXS5kb3BwZWx0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMuYmVzdGVsbHVuZ2VuW2hdLmRvcHBlbHQgPSB0cnVlOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyBnZWxhZGVuZSBCZXN0ZWxsdW5nZW4gd2VyZGVuIGdlcHJ1ZWZ0LCBvYiBzaWUgb2ZmZW4sIGFiZXIgc2Nob24gYWJnZWxhdWZlbiBzaW5kIC0tPiBhdXRvbWF0aXNjaCBhYmdlYnJvY2hlbgogICAgdGVzdEFiZ2VsYXVmZW46IGZ1bmN0aW9uIHRlc3RBYmdlbGF1ZmVuKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczguYmVzdGVsbHVuZ2VuLmZvckVhY2goIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIHZhciBoZXV0ZSwgc3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhldXRlID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbmV3IERhdGUoaXRlbS5zdGFydGRhdHVtKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShzdGFydC5nZXRUaW1lKCkgPD0gaGV1dGUuZ2V0VGltZSgpICYmIGl0ZW0uc3RhdHVzID09ICcwJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LmFiYnJlY2hlbihpdGVtLmJuciwgMSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICAgICAgICAgIH0pKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KCkpOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gZ2VsYWRlbmUgQmVzdGVsbHVuZ2VuIHdlcmRlbiBnZXBydWVmdCwgb2Igc2llIGxhdWZlbmQgc2luZCwgYWJlciBhdXRvIG5vY2ggbmljaHQgYWJnZWhvbHQgd3VyZGUgc2luZCAtLT4gYXV0b21hdGlzY2ggYWJnZWJyb2NoZW4gbWl0IHN0cmFmZQogICAgdGVzdE5pY2h0QW5nZXRyZXRlbjogZnVuY3Rpb24gdGVzdE5pY2h0QW5nZXRyZXRlbigpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM5LmJlc3RlbGx1bmdlbi5mb3JFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaGV1dGUsIHN0YXJ0OwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXV0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IG5ldyBEYXRlKGl0ZW0uc3RhcnRkYXR1bSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFydC5zZXREYXRlKHN0YXJ0LmdldERhdGUoKSArIDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlclNlcnZpY2UuZ2V0Q2FyKGl0ZW0uYXV0b19maykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF1dG8gPSByZXNwb25zZS5kYXRhLmNhcjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGFydC5nZXRUaW1lKCkgPD0gaGV1dGUuZ2V0VGltZSgpICYmIGl0ZW0uc3RhdHVzID09ICcxJyAmJiBhdXRvLmF1c2dlbGllaGVuID09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmVzdGVsbGtvc3RlbiA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZXJTZXJ2aWNlLmdldE9yZGVyQ29zdChpdGVtLmJucikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuY29zdHMuZm9yRWFjaChmdW5jdGlvbiAoY29zdCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0ZWxsa29zdGVuLnB1c2goY29zdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkuYWJicmVjaGVuKGl0ZW0uYm5yLCAxLCBhdXRvLCBiZXN0ZWxsa29zdGVuKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5LmF1c2dld2FlaGx0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkubXNnID0gIkFsbGUgQmVzdGVsbHVuZ2VuIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbi8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5oYW5kbGUoZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczkuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM5Lm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbi8iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94MykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmMy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8vIGdlbGFkZW5lIEJlc3RlbGx1bmdlbiB3ZXJkZW4gZ2VwcnVlZnQsIG9iIHNpZSBsYXVmZW5kIHNpbmQsIGFiZXIgZXMgenUgVmVyc3DDpHR1bmcgYmVpIEF1dG9hYmdhYmUgZHVyY2ggS3VuZGVuIGthbQogICAgdGVzdFZlcnNwZWF0dW5nOiBmdW5jdGlvbiB0ZXN0VmVyc3BlYXR1bmcoKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczEwLmJlc3RlbGx1bmdlbi5mb3JFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaGV1dGUsIGVuZGRhdHVtLCBvbmVEYXksIGRpZmZEYXlzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZXV0ZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRkYXR1bSA9IG5ldyBEYXRlKGl0ZW0uZW5kZGF0dW0pOyAvLyBudXIgYmVzdGVsbHVuZ2VuLCB3byBhdXRvIG5vY2ggbmljaHQgYWJnZWdlYmVuIHd1cmRlCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZW5kZGF0dW0uZ2V0VGltZSgpIDwgaGV1dGUuZ2V0VGltZSgpICYmIChpdGVtLnN0YXR1cyA9PSAnMScgfHwgaXRlbS5zdGF0dXMgPT0gJzUnKSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmVEYXkgPSAyNCAqIDYwICogNjAgKiAxMDAwOyAvLyBob3VycyptaW51dGVzKnNlY29uZHMqbWlsbGlzZWNvbmRzCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlmZkRheXMgPSBNYXRoLmZsb29yKChoZXV0ZS5nZXRUaW1lKCkgLSBlbmRkYXR1bS5nZXRUaW1lKCkpIC8gb25lRGF5KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLnNldHplVmVyc3BhZXR1bmcoaXRlbS5ibnIsIGRpZmZEYXlzLCBpdGVtLmF1dG9fZmspOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94NCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgfSgpKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgSGVscGVyLmhhbmRsZShlcnJvcik7CiAgICAgICAgICAgICAgICAgIF90aGlzMTAuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXMxMC5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gUHJlaXMgYW5wYXNzZW4gamUgbmFjaCB1ZWJlcnpvZ2VuZXIgVGFnZQogICAgc2V0emVWZXJzcGFldHVuZzogZnVuY3Rpb24gc2V0emVWZXJzcGFldHVuZyhibnIsIHRhZ2UsIGF1dG9uYW1lKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBVc2VyU2VydmljZS5nZXRDYXIoYXV0b25hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgIHZhciBhdXRvID0gcmVzcG9uc2UuZGF0YS5jYXI7CiAgICAgICAgICAgICAgICAgIHZhciB1ZWJlcnp1Z3NnZWJ1ZWhyZW4gPSBhdXRvLnByZWlzICogdGFnZTsKCiAgICAgICAgICAgICAgICAgIGlmIChhdXRvLmF1c2dlbGllaGVuKSB7CiAgICAgICAgICAgICAgICAgICAgQXV0aC5hZGRDb3N0KGJuciwgMywgdWViZXJ6dWdzZ2VidWVocmVuLCB0YWdlICsgJyBUYWdlIFZlcnNwYWV0ZXRlIEFiZ2FiZSBBdXRvJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY2hhbmdlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpczExLmJlc3RlbGxrb3N0ZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtvc3RlbiA9IF90aGlzMTEuYmVzdGVsbGtvc3Rlbi5maW5kKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJuciA9PSBibnIgJiYgZWxlbWVudC5wb3MgPT0gcmVzcG9uc2UuZGF0YS5wb3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb3N0ZW4ubWVuZ2UgPSB1ZWJlcnp1Z3NnZWJ1ZWhyZW47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb3N0ZW4uYmVzY2hyZWlidW5nID0gdGFnZSArICcgVGFnZSBWZXJzcGFldGV0ZSBBYmdhYmUgQXV0byc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuYmVzdGVsbGtvc3Rlbi5wdXNoKHJlc3BvbnNlLmRhdGEuY29zdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGgudXBkYXRlU3RhdHVzT3JkZXIoYm5yLCA1KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuYmVzdGVsbHVuZ2VuLmZpbmQoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuYm5yID09IGJucjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnN0YXR1cyA9IDU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczExLmF1c2dld2FlaGx0ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMxMS5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbiIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMTEubXNnID0gIkFsbGUgQmVzdGVsbHVuZ2VuIjsKICAgICAgICAgICAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbiIpOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgSGVscGVyLmhhbmRsZShlcnJvcik7CiAgICAgICAgICAgICAgICAgIF90aGlzMTEuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgX3RoaXMxMS5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgICAgICAgICAgICBIZWxwZXIucmVkaXJlY3QoIi9hZG1pbi9iZXN0ZWxsdW5nZW4iKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGhvbGVBdXRvOiBmdW5jdGlvbiBob2xlQXV0byhhdXRvbmFtZSkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgVXNlclNlcnZpY2UuZ2V0Q2FyKGF1dG9uYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBfdGhpczEyLmF1dG8gPSByZXNwb25zZS5kYXRhLmNhcjsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgICAgICAgICAgX3RoaXMxMi5hdXNnZXdhZWhsdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICBfdGhpczEyLm1zZyA9ICJBbGxlIEJlc3RlbGx1bmdlbiI7CiAgICAgICAgICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbi8iKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTkpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBob2xlS29zdGVuOiBmdW5jdGlvbiBob2xlS29zdGVuKGJucikgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICB0aGlzLmJlc3RlbGxrb3N0ZW4gPSBbXTsKICAgICAgVXNlclNlcnZpY2UuZ2V0T3JkZXJDb3N0KGJucikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXNwb25zZS5kYXRhLmNvc3RzLmZvckVhY2goZnVuY3Rpb24gKGNvc3QpIHsKICAgICAgICAgIF90aGlzMTMuYmVzdGVsbGtvc3Rlbi5wdXNoKGNvc3QpOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICBfdGhpczEzLmF1c2dld2FlaGx0ID0gZmFsc2U7CiAgICAgICAgX3RoaXMxMy5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluL2Jlc3RlbGx1bmdlbi8iKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gZmFlcmJlIHRhYmVsbGUsIHdlbm4gZG9wcGVsdGUgYmVzdGVsbHVuZwogICAgZ2V0Q2xhc3M6IGZ1bmN0aW9uIGdldENsYXNzKGJlc3RlbGx1bmcpIHsKICAgICAgaWYgKGJlc3RlbGx1bmcuZG9wcGVsdCkgewogICAgICAgIHRoaXMuY2xhc3MgPSAiZG9wcGVsdCI7CiAgICAgICAgcmV0dXJuIHRoaXMuY2xhc3M7CiAgICAgIH0gZWxzZSBpZiAoYmVzdGVsbHVuZy5zdGF0dXMgPT0gMikgewogICAgICAgIHRoaXMuY2xhc3MgPSAiYmV6YWhsZW4iOwogICAgICAgIHJldHVybiB0aGlzLmNsYXNzOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2xhc3MgPSAibm9ybWFsIjsKICAgICAgICByZXR1cm4gdGhpcy5jbGFzczsKICAgICAgfQogICAgfSwKICAgIC8vIHp1ciBkZXRhaWxsaWVydGVuIEJlc3RlbGzDvGJlcnNpY2h0IHdlY2hzZWxuCiAgICBlZGl0aW5nT3JkZXI6IGZ1bmN0aW9uIGVkaXRpbmdPcmRlcihibnIpIHsKICAgICAgdGhpcy5hdXNnZXdhZWhsdCA9IHRydWU7CiAgICAgIHRoaXMubXNnID0gIkJlc3RlbGx1bmc6ICIgKyBibnI7CiAgICAgIHRoaXMuZ2V3YWVobHRlQmVzdGVsbHVuZyA9IHRoaXMuYmVzdGVsbHVuZ2VuLmZpbmQoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICByZXR1cm4gZWxlbWVudC5ibnIgPT0gYm5yOwogICAgICB9KTsKICAgICAgdGhpcy5ob2xlS29zdGVuKGJucik7CiAgICAgIHRoaXMuaG9sZUF1dG8odGhpcy5nZXdhZWhsdGVCZXN0ZWxsdW5nLmF1dG9fZmspLnRoZW4odGhpcy4kcm91dGVyLnB1c2goIi9hZG1pbi9iZXN0ZWxsdW5nZW4vIiArIGJucikpOwogICAgfSwKICAgIC8vIGFsbGUgYmVzdGVsbHVuZ2VuIHZvbiBiYWNrZW5kIGhvbGVuCiAgICBob2xlQmVzdGVsbHVuZ2VuOiBmdW5jdGlvbiBob2xlQmVzdGVsbHVuZ2VuKHR5cCkgewogICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7CgogICAgICBpZiAodGhpcy5iZXN0ZWxsdW5nZW4ubGVuZ3RoIDwgMSkgewogICAgICAgIHZhciBiZXN0ZWxsdHlwID0gJyc7CgogICAgICAgIGlmICh0eXAgPT0gNykgewogICAgICAgICAgYmVzdGVsbHR5cCA9ICJnZXNjaGxvc3NlbiI7CiAgICAgICAgfSBlbHNlIGlmICh0eXAgPT0gNikgewogICAgICAgICAgYmVzdGVsbHR5cCA9ICJvZmZlbiAiICsgMDsKICAgICAgICB9IGVsc2UgaWYgKHR5cCA9PSA4IHx8IHR5cCA9PSA5KSB7CiAgICAgICAgICBiZXN0ZWxsdHlwID0gImFsbGUiOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBiZXN0ZWxsdHlwID0gIm9mZmVuICIgKyB0eXA7CiAgICAgICAgfQoKICAgICAgICBVc2VyU2VydmljZS5nZXRPcmRlcihiZXN0ZWxsdHlwKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmVzcG9uc2UuZGF0YS5vcmRlcnMuZm9yRWFjaChmdW5jdGlvbiAob3JkZXIpIHsKICAgICAgICAgICAgb3JkZXIuZG9wcGVsdCA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMxNC5iZXN0ZWxsdW5nZW4ucHVzaChvcmRlcik7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAodHlwID09IDAgfHwgdHlwID09IDYgfHwgdHlwID09IDgpIHsKICAgICAgICAgICAgX3RoaXMxNC50ZXN0ZG9wcGVsdCgpOwogICAgICAgICAgfSAvL251ciBkb3BwZWx0ZSBhbnplaWdlbgoKCiAgICAgICAgICBpZiAodHlwID09IDYpIHsKICAgICAgICAgICAgdmFyIGJlc3RlbGx1bmdlbiA9IFtdOwoKICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpczE0LmJlc3RlbGx1bmdlbi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmIChfdGhpczE0LmJlc3RlbGx1bmdlbltpXS5kb3BwZWx0KSB7CiAgICAgICAgICAgICAgICBiZXN0ZWxsdW5nZW4ucHVzaChfdGhpczE0LmJlc3RlbGx1bmdlbltpXSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpczE0LmJlc3RlbGx1bmdlbiA9IGJlc3RlbGx1bmdlbjsKICAgICAgICAgIH0gLy8gd2VubiBlaW56ZWxuZSBiZXN0ZWxsdW5nIGFuZ2VzZWhlbiB3aXJkLCBtdWVzc2VuIGFsbGUgYmVzdGVsbHVuZ2VuIGdlbGFkZW4gd2VyZGVuCiAgICAgICAgICAvL3VtIG1vZWdsaWNoZSBrb25mbGlrdGUgenUgc2VoZW4gdS4gYXVjaCBzcGV6aWZpc2NoZSBiZXN0ZWxsdW5nIHp1IGZpbmRlbgoKCiAgICAgICAgICBpZiAodHlwID09IDkpIHsKICAgICAgICAgICAgX3RoaXMxNC5nZXdhZWhsdGVCZXN0ZWxsdW5nID0gX3RoaXMxNC5iZXN0ZWxsdW5nZW4uZmluZChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJuciA9PSBfdGhpczE0LiRyb3V0ZS5wYXJhbXMuYm5yOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzMTQuaG9sZUtvc3RlbihfdGhpczE0LiRyb3V0ZS5wYXJhbXMuYm5yKTsKCiAgICAgICAgICAgIF90aGlzMTQuaG9sZUF1dG8oX3RoaXMxNC5nZXdhZWhsdGVCZXN0ZWxsdW5nLmF1dG9fZmspOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzMTQuZ2VzdWNodGVCZXN0ZWxsdW5nZW4gPSBfdGhpczE0LmJlc3RlbGx1bmdlbjsKCiAgICAgICAgICBfdGhpczE0LnRlc3RWZXJzcGVhdHVuZygpLnRoZW4oX3RoaXMxNC50ZXN0QWJnZWxhdWZlbigpLnRoZW4oX3RoaXMxNC50ZXN0TmljaHRBbmdldHJldGVuKCkudGhlbigpKF90aGlzMTQuZ2VzdWNodGVCZXN0ZWxsdW5nZW4gPSBfdGhpczE0LmJlc3RlbGx1bmdlbiwgLy8gZmlsdGVyIGF1dG9tYXRpc2NoIGF1ZiBnZWxhZGVuZSBkYXRlbnNhZXR6ZSBhbmdld2FuZHQKICAgICAgICAgIF90aGlzMTQuc3VjaGVuKCkpKSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBIZWxwZXIuaGFuZGxlKGVycm9yKTsKICAgICAgICAgIEhlbHBlci5yZWRpcmVjdCgiL2FkbWluIik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBzdGF0dXMgaW4gdGV4dCB1bXdhbmRlbG4KICAgIHN0YXR1czogZnVuY3Rpb24gc3RhdHVzKF9zdGF0dXMpIHsKICAgICAgaWYgKF9zdGF0dXMgPT0gMCkgewogICAgICAgIHJldHVybiAnV2FydGV0IGF1ZiBCZXN0YWV0aWd1bmcnOwogICAgICB9IGVsc2UgaWYgKF9zdGF0dXMgPT0gMSkgewogICAgICAgIHJldHVybiAnTGF1ZmVuZGUgQmVzdGVsbHVuZyc7CiAgICAgIH0gZWxzZSBpZiAoX3N0YXR1cyA9PSAyKSB7CiAgICAgICAgcmV0dXJuICdCZXphaGx1bmcgYXVzc3RlaGVuZCc7CiAgICAgIH0gZWxzZSBpZiAoX3N0YXR1cyA9PSAzKSB7CiAgICAgICAgcmV0dXJuICdBYmdlYnJvY2hlbmUgQmVzdGVsbHVuZyc7CiAgICAgIH0gZWxzZSBpZiAoX3N0YXR1cyA9PSA0KSB7CiAgICAgICAgcmV0dXJuICdFcmZvbGdyZWljaCBhYmdlc2NobG9zc2VuZSBCZXN0ZWxsdW5nJzsKICAgICAgfSBlbHNlIGlmIChfc3RhdHVzID09IDUpIHsKICAgICAgICByZXR1cm4gJ8OcYmVyZsOkbGxpZ2UgQmVzdGVsbHVuZyc7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXNhbXRrb3N0ZW46IGZ1bmN0aW9uIGdlc2FtdGtvc3RlbigpIHsKICAgICAgaWYgKHRoaXMuYmVzdGVsbGtvc3Rlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGdlc2FtdCA9IDA7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5iZXN0ZWxsa29zdGVuLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBnZXNhbXQgKz0gdGhpcy5iZXN0ZWxsa29zdGVuW2ldLm1lbmdlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGdlc2FtdDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJyc7CiAgICAgIH0KICAgIH0KICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHZhciBoZXV0ZSA9IG5ldyBEYXRlKCk7CiAgICB0aGlzLmRhdGVwaWNrZXJTZXR0aW5nLnZhbHVlID0gSGVscGVyLmZvcm1hdERhdGUoaGV1dGUpOyAvLzAgICAgICAgICAgICAgICAgICAgICAgIDMsNCAgICAgICAgICAgICAgICAgICAyICAgICAgICAgICAgICAgICAgICAgICAgICAgNSAgICAgICAgICAgICAgICAgICBkb3BwZWx0ID0gdHJ1ZSAgICAgICAgICAgICAgMQoKICAgIHRoaXMuYmVzdGVsbHVuZ3N0eXBlbiA9IFsiQWxsZSBCZXN0ZWxsdW5nZW4iLCAiT2ZmZW5lIEJlc3RlbGxhbmZyYWdlbiIsICJCZXN0ZWxsdW5nc2hpc3RvcmllIiwgIk9mZmVuZSBCZXphaGx1bmciLCAiVWViZXJ6b2dlbmUgQmVzdGVsbHVuZ2VuIiwgIkRvcHBlbHRlIEJlc3RlbGx1bmdlbiIsICJMYXVmZW5kZSBCZXN0ZWxsdW5nZW4iXTsKCiAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmJuciAhPSAiIikgewogICAgICB0aGlzLmF1c2dld2FlaGx0ID0gdHJ1ZTsKICAgICAgdGhpcy5tc2cgPSAiQmVzdGVsbHVuZzogIiArIHRoaXMuJHJvdXRlLnBhcmFtcy5ibnI7CiAgICAgIHRoaXMuaG9sZUJlc3RlbGx1bmdlbig5KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuYXVzZ2V3YWVobHQgPSBmYWxzZTsKICAgICAgdGhpcy5tc2cgPSAiQWxsZSBCZXN0ZWxsdW5nZW4iOwogICAgICB0aGlzLmhvbGVCZXN0ZWxsdW5nZW4oMCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\BestellungenMa.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"ma\">\r\n        <div v-if=\"!ausgewaehlt\">\r\n            <h1>{{msg}}</h1>\r\n            <select v-model=\"bestellungsauswahl\">\r\n                <option value=\"\" disabled selected>Filter Bestellungen</option>\r\n                <option\r\n                    v-for=\"(bestellung, index) in bestellungstypen\"\r\n                    :key=\"index\"\r\n                    :value=\"bestellung\"\r\n                >\r\n                    {{bestellung}}\r\n                </option>\r\n            </select>\r\n            <button @click=\"update()\">Aktualisieren</button>\r\n            <div>\r\n                <datepicker-lite \r\n                :value-attr=\"datepickerSetting.value\"\r\n                :year-minus=\"datepickerSetting.yearMinus\"\r\n                :from=\"datepickerSetting.from\"\r\n                :to=\"datepickerSetting.to\"\r\n                :disabled-date=\"datepickerSetting.disabledDate\"\r\n                :locale=\"datepickerSetting.locale\"\r\n                @value-changed=\"datepickerSetting.changeEvent\"\r\n                />\r\n                <datepicker-lite \r\n                :value-attr=\"datepickerSetting2.value\"\r\n                :year-minus=\"datepickerSetting2.yearMinus\"\r\n                :from=\"datepickerSetting2.from\"\r\n                :to=\"datepickerSetting2.to\"\r\n                :disabled-date=\"datepickerSetting2.disabledDate\"\r\n                :locale=\"datepickerSetting2.locale\"\r\n                @value-changed=\"datepickerSetting2.changeEvent\"\r\n                />\r\n                <input type=\"text\" placeholder=\"Nach BNR suchen\" v-model=\"bnr\">\r\n                <input type=\"text\" placeholder=\"Nach Vorname suchen\" v-model=\"vorname\">\r\n                <input type=\"text\" placeholder=\"Nach Nachname suchen\" v-model=\"nachname\">\r\n                <button @click=\"suchen()\">Suchen</button>\r\n            </div>\r\n            <br /> \r\n            <br />  \r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>BNR</th>\r\n                        <th>Startdatum</th>\r\n                        <th>Enddatum</th>\r\n                        <th>Auto</th>\r\n                        <th>Vorname</th>\r\n                        <th>Nachname</th>\r\n                        <th>Erstelldatum</th>\r\n                        <th>Status</th>\r\n                        <th>Bearbeiten</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(bestellung, index) in gesuchteBestellungen\" :key=\"index\" :class=\"getClass(bestellung)\">\r\n                        <td>{{bestellung.bnr}}</td>\r\n                        <td>{{bestellung.startdatum}}</td>\r\n                        <td>{{bestellung.enddatum}}</td>\r\n                        <td>{{bestellung.auto_fk}}</td>\r\n                        <td>{{bestellung.vorname}}</td>\r\n                        <td>{{bestellung.nachname}}</td>\r\n                        <td>{{bestellung.zeitstempel}}</td>\r\n                        <td>{{status(bestellung.status)}}</td>\r\n                        <td><button @click=\"editingOrder(bestellung.bnr)\">Weiter</button></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n             <br /> \r\n            <br />  \r\n            <button @click=\"home()\">Zurueck</button>\r\n        </div>\r\n        <div  v-else>\r\n            <h1>{{msg}}</h1>\r\n            <br /> <h3>Auto: {{gewaehlteBestellung.auto_fk}}</h3>\r\n            <br /> <h3>Kunde: {{gewaehlteBestellung.vorname}} {{gewaehlteBestellung.nachname}}</h3>\r\n            <br /> <h3>Email: {{gewaehlteBestellung.user}}</h3>\r\n            <br /> <h3>Adresse: {{gewaehlteBestellung.adresse}}</h3>\r\n            <br /> <h3>Telefon: {{gewaehlteBestellung.telefon}}</h3>\r\n            <br /> <h3>Mietzeitraum: {{gewaehlteBestellung.startdatum}} - {{gewaehlteBestellung.enddatum}}</h3>\r\n            <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Kosten</th>\r\n                        <th>Beschreibung</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(kosten, index) in bestellkosten\" :key=\"index\">\r\n                        <td>{{kosten.menge}}€</td>\r\n                        <td>{{kosten.beschreibung}}</td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <br /> <h3>Gesamtkosten: {{gesamtkosten}}€</h3>   \r\n            <button type=\"cancel\" @click=\"back\">Zurueck zur Suche</button>\r\n            <div v-if=\"(gewaehlteBestellung.status==0 || gewaehlteBestellung.status==1) && auto.ausgeliehen ==0\">\r\n                <button @click=\"abbrechen(gewaehlteBestellung.bnr, 0)\" :disabled=\"gewaehlteBestellung.status!=0 && gewaehlteBestellung.status!=1 && auto.ausgeliehen !=0\">Abbrechen</button>\r\n            </div>\r\n            <div v-if=\"gewaehlteBestellung.status==0\">\r\n                <button @click=\"acceptOrder(gewaehlteBestellung.bnr)\" :disabled=\"gewaehlteBestellung.status!=0\">Bestaetigen</button>\r\n            </div>\r\n            <div v-if=\"auto.ausgeliehen == 0 && gewaehlteBestellung.status==1\">\r\n                <button @click=\"ausleihen(auto.name)\">Auto ausleihen</button>\r\n            </div> \r\n            <div v-if=\"gewaehlteBestellung.status==5 && auto.ausgeliehen == 1\">\r\n                <button @click=\"rueckgabe(gewaehlteBestellung.bnr)\">Auto zurueckgeben</button>\r\n            </div>\r\n            <div v-if=\"(auto.ausgeliehen == 1 && gewaehlteBestellung.status==1) || (auto.ausgeliehen == 0 && gewaehlteBestellung.status==2)\">\r\n                <button @click=\"finishOrder(gewaehlteBestellung.bnr)\">Abschließen</button>\r\n            </div>\r\n            <div v-if=\"gewaehlteBestellung.status!=3 && gewaehlteBestellung.status!=4\">\r\n                <button @click=\"showDamage(gewaehlteBestellung)\">Anzeigen Offener Autoprobleme</button>\r\n            </div>\r\n         </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n// Hier wird fuer Mitarbeiter/Admin alles bzgl. Bestellungen angezeigt/definiert\r\nimport UserService from \"../services/user.service\";\r\nimport Auth from \"../services/auth.service\";\r\nimport Helper from \"../services/helper.service\";\r\nimport DatepickerLite from \"./DatepickerLite.vue\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            ausgewaehlt: false,\r\n            msg: '',\r\n            bestellungen: [],\r\n            gesuchteBestellungen: [],\r\n            gewaehlteBestellung: '',\r\n            schaeden: [],\r\n            bestellkosten: [],\r\n            class: '',\r\n            bestellungsauswahl: '',\r\n            bestellungstypen: [],\r\n            auto: '',\r\n            bnr: '',\r\n            vorname: '',\r\n            nachname: '',\r\n            erstelldatum: '',\r\n            start: '',\r\n            ende: '',\r\n            datepickerSetting : {\r\n                value:\"\",\r\n                yearMinus: 0,\r\n                from: \"\",\r\n                to: \"1999/01/01\",\r\n                disabledDate: [],\r\n                locale: {\r\n                format: \"YYYY/MM/DD\",\r\n                weekday: [\"Son\", \"Mon\", \"Dien\", \"Mit\", \"Don\", \"Frei\", \"Sam\"],\r\n                todayBtn: \"Heute\",\r\n                clearBtn: \"Löschen\",\r\n                closeBtn: \"Schliessen\",\r\n                },\r\n                changeEvent: (value) => {\r\n                    this.start = value\r\n                }\r\n            },\r\n            //enddatum\r\n            datepickerSetting2 : {\r\n                value: \"\",\r\n                yearMinus: 0,\r\n                from: \"\",\r\n                to: \"1999/01/01\",\r\n                disabledDate: [],\r\n                locale: {\r\n                format: \"YYYY/MM/DD\",\r\n                weekday: [\"Son\", \"Mon\", \"Dien\", \"Mit\", \"Don\", \"Frei\", \"Sam\"],\r\n                todayBtn: \"Heute\",\r\n                clearBtn: \"Löschen\",\r\n                closeBtn: \"Schliessen\",\r\n                },\r\n                changeEvent: (value) => {\r\n                    this.ende = value\r\n                }\r\n            }\r\n        }\r\n    },\r\n    components: {\r\n        DatepickerLite\r\n    },\r\n    methods: {\r\n        // daten neu laden bzw. bestimmte bestellungstypen anzeigen\r\n        update(){\r\n            if(this.bestellungsauswahl == ''){\r\n                alert(\"Bitte waehlen Sie einen Filter aus\")\r\n                return\r\n            }\r\n            this.bestellungen = []\r\n            this.gesuchteBestellungen = []\r\n            let typ = -1\r\n            if (this.bestellungsauswahl == \"Offene Bestellanfragen\") typ = 0\r\n            else if(this.bestellungsauswahl == \"Bestellungshistorie\") typ = 7 //3 u. 4\r\n            else if(this.bestellungsauswahl == \"Offene Bezahlung\") typ = 2\r\n            else if(this.bestellungsauswahl == \"Ueberzogene Bestellungen\") typ = 5\r\n            else if(this.bestellungsauswahl ==\"Laufende Bestellungen\") typ = 1\r\n            else if(this.bestellungsauswahl == \"Doppelte Bestellungen\") typ = 6\r\n            else if(this.bestellungsauswahl == \"Alle Bestellungen\") typ = 8\r\n            this.holeBestellungen(typ)\r\n        },\r\n        // bestimmte bestellungen suchen\r\n        suchen(){\r\n            this.gesuchteBestellungen = this.bestellungen.filter((bestellung) => {\r\n                let bnr = false;\r\n                let name = false\r\n                let datum = false\r\n                let startdatum = new Date(this.start)\r\n                let enddatum = new Date(this.ende)\r\n                let zeitstempel = new Date(bestellung.zeitstempel)\r\n                if (this.bnr == \"\") {\r\n                    bnr = true;\r\n                } else {\r\n                    bnr = bestellung.bnr == this.bnr;\r\n                }\r\n\r\n                if (this.vorname == \"\" || this.nachname == \"\") {\r\n                    name = true\r\n                } else name = (\r\n                    this.vorname.toLowerCase().split(\" \").every((v) => bestellung.vorname.toLowerCase().includes(v)) &&\r\n                    this.nachname.toLowerCase().split(\" \").every((v) => bestellung.nachname.toLowerCase().includes(v))\r\n                )\r\n                if((this.start == '' && this.ende == '') || (startdatum.getTime() > enddatum.getTime())){\r\n                    datum = true\r\n                }\r\n                else if(this.ende == ''){\r\n                    if(startdatum.getTime() == zeitstempel.getTime()){\r\n                        datum = true\r\n                    }\r\n                    else{\r\n                        datum = false\r\n                    }\r\n                }\r\n                else if(this.start == ''){\r\n                    if(enddatum.getTime() == zeitstempel.getTime()){\r\n                        datum = true\r\n                    }\r\n                    else{\r\n                        datum = false\r\n                    }\r\n                }\r\n                else{\r\n                    if((startdatum.getTime() <= zeitstempel.getTime()) && (enddatum.getTime() >= zeitstempel.getTime())){\r\n                        datum = true\r\n                    }\r\n                    else{\r\n                        datum = false\r\n                    }\r\n                }\r\n                return (bnr && name && datum)\r\n            })\r\n        },\r\n        // zurueck zur allgemeinen Bestellueubersicht\r\n        back() {\r\n            this.ausgewaehlt = false;\r\n            this.msg = \"Alle Bestellungen\"\r\n            this.$router.push(\"/admin/bestellungen\")\r\n        },\r\n        home() {\r\n            this.$router.push(\"/admin\")\r\n        },\r\n        showDamage(bestellung){\r\n            // vor bestaetigung behandlung schaeden\r\n            if(bestellung.status == 0){\r\n                Helper.redirect(\"/admin/\"+bestellung.auto_fk+\"/schaden\");\r\n            }\r\n            // offene oder zeitlich ueberfaellige bestellungen\r\n            else if(bestellung.status == 1 || bestellung.status == 5 || bestellung.status == 2){\r\n                 Helper.redirect(\"/admin/\"+bestellung.auto_fk+\"/schaden\" + \"/\" + bestellung.bnr);\r\n            }\r\n        },\r\n          abbrechen(bnr, skip, auto, bestellkosten) {\r\n            let bestaetigen = false \r\n            if(!skip){\r\n                bestaetigen = confirm(\"Moechten Sie die Bestellung BNR: \" + bnr + \" wirklich abbrechen?\")\r\n            } \r\n            else{\r\n                bestaetigen = true  \r\n            }\r\n            if(bestaetigen){\r\n                let bestellung = 0\r\n                 if(this.$route.params.bnr == ! ''){\r\n                    bestellung = this.gewaehlteBestellung\r\n                    bestellkosten = this.bestellkosten\r\n                    auto = this.auto\r\n                }\r\n                else{\r\n                    bestellung = this.bestellungen.find((element) => element.bnr == bnr)\r\n                }             \r\n                // wenn vor ausleihe des autos vor ort probleme mit kunden (z.b. kann nicht bezahlen), dann abbruch mit strafzahlung\r\n                if(auto.ausgeliehen == 0 && bestellung.status == 1){\r\n                    //Strafe in Form von 30% der Bestellkosten des zu mietenden Autos \r\n                    let kosten = 0\r\n                    for(let i =0; i< bestellkosten.length; i++){\r\n                        if(bestellkosten[i].typ != 0){\r\n                            kosten = bestellkosten[i].menge\r\n                        }\r\n                    }\r\n                    if(!skip) alert(\"Es wird wegen der kurzfristign Absage eine Strafzahlung in Hoehe von \" + ((kosten/100)*30) + \"€ faellig\")\r\n                    bestellung.status = 2\r\n                    Auth.updateStatusOrder(bnr, 2)\r\n                        .then((response) =>{\r\n                            if(response.data.success){\r\n                                    Auth.addCost(bnr, 2, ((kosten/100)*30), 'Strafkosten fuer Problem bei Abholung des Autos')\r\n                                    .then((response) =>{\r\n                                        if(response.data.success){\r\n                                            if(this.$route.params.bnr == ! ''){\r\n                                                // daten aktualisieren, indem in array eingefuegt\r\n                                                this.bestellkosten.push(response.data.cost)\r\n                                            }\r\n                                            // Standarkosten loeschen, da Kunde nie auto ausgeliehen hat\r\n                                            Auth.deleteCost(bnr, 0, null)\r\n                                            .then((response) =>{\r\n                                                if(response.data.success){\r\n                                                     if(this.$route.params.bnr == ! ''){\r\n                                                        // daten aktualisieren, indem aus array geloescht \r\n                                                        for(let i=0; i<this.bestellkosten.length;i++){\r\n                                                            if(this.bestellkosten[i].typ == 0){\r\n                                                                this.bestellkosten.splice(i,1)\r\n                                                                break\r\n                                                            }\r\n                                                        }\r\n                                                     }\r\n                                                }\r\n                                            })\r\n                                            .catch((error) => {\r\n                                                Helper.handle(error)\r\n                                                this.ausgewaehlt = false;\r\n                                                this.msg = \"Alle Bestellungen\"\r\n                                                Helper.redirect(\"/admin/bestellungen\");\r\n                                            })\r\n                                        }\r\n                                    })\r\n                                    .catch((error) => {\r\n                                        Helper.handle(error)\r\n                                        this.ausgewaehlt = false;\r\n                                        this.msg = \"Alle Bestellungen\"\r\n                                        Helper.redirect(\"/admin/bestellungen\");\r\n                                        })\r\n                            }\r\n                            })\r\n                            .catch((error) => {\r\n                            Helper.handle(error)\r\n                            this.ausgewaehlt = false;\r\n                            this.msg = \"Alle Bestellungen\"\r\n                            Helper.redirect(\"/admin/bestellungen\");\r\n                    })\r\n                }\r\n                else{\r\n                    Auth.updateStatusOrder(bnr, 3)\r\n                    .then(response =>{\r\n                        if(response.data.success){\r\n                            if(this.$route.params.bnr != \"\"){\r\n                                this.gewaehlteBestellung.status = 3\r\n                            }\r\n                            this.bestellungen.find(\r\n                            (element) => element.bnr == bnr).status = 3\r\n                            if(!skip) alert(\"Bestellung wurde erfolgreich abgebrochen.\")\r\n                            this.ausgewaehlt = false\r\n                            this.msg = \"Alle Bestellungen\"\r\n                            Helper.redirect(\"/admin/bestellungen\");\r\n                            return\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        Helper.handle(error)\r\n                        this.ausgewaehlt = false\r\n                        this.msg = \"Alle Bestellungen\"\r\n                        Helper.redirect(\"/admin/bestellungen\");\r\n                        return\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        //Bestellung akzeptieren --> 0 zu 1\r\n        acceptOrder(bnr){\r\n            let bestellung = this.bestellungen.find(\r\n            (element) => element.bnr == bnr)\r\n            let date = bestellung\r\n            //ueberpruefung, ob doppelte bestellungen\r\n            if(bestellung.doppelt){\r\n                let doppelt = [bestellung]\r\n                for(let i=0;i<this.bestellungen.length;i++){\r\n                    if(bestellung.bnr == this.bestellungen[i].bnr){\r\n                        continue\r\n                    }\r\n                    else if(bestellung.auto_fk == this.bestellungen[i].auto_fk && this.bestellungen[i].doppelt){\r\n                        doppelt.push(this.bestellungen[i])\r\n                    }\r\n                }\r\n                for(let i=1;i<doppelt.length;i++){\r\n                    alert(\"Die Bestellung BNR: \" + doppelt[i].bnr + \" ueberschneidet sich mit dieser Bestellung\")\r\n                }\r\n                for(let i=1;i<doppelt.length-1;i++){\r\n                    let d1 = new Date(doppelt[i].zeitstempel) \r\n                    let d2 = new Date(doppelt[i+1].zeitstempel) \r\n                    if(d1.getTime() < d2.getTime()){\r\n                        date = doppelt[i]\r\n                    }\r\n                    else{\r\n                        date = doppelt[i+1]\r\n                    }\r\n                }\r\n                if(confirm(\"Soll die frueheste Bestellung BNR: \" +  date.bnr +\" akzeptiert und automatisch die anderen Anfragen abgebrochen werden?\")){\r\n                    doppelt.forEach(async (item) => {\r\n                        if(item.bnr == date.bnr){\r\n                            return\r\n                        }\r\n                        await this.abbrechen(item.bnr, 1)\r\n                    })\r\n                }\r\n                else{\r\n                    return\r\n                }   \r\n            }\r\n            UserService.getSchaeden(date.auto_fk)\r\n                .then((response) => {\r\n                    // wenn kein schaden, dann kann bestellung bestaetigt werden\r\n                    if(response.data.success){\r\n                        Auth.updateStatusOrder(date.bnr, 1)\r\n                        .then((response) =>{\r\n                            if(response.data.success){\r\n                                this.bestellungen.find(\r\n                                (element) => element.bnr == date.bnr).status = 1\r\n                                alert(\"Bestellung wurde erfolgreich bestaetigt.\")\r\n                                this.ausgewaehlt = false\r\n                                this.msg = \"Alle Bestellungen\"\r\n                                Helper.redirect(\"/admin/bestellungen\");\r\n                                return\r\n                            }\r\n                        })\r\n                            .catch((error) => {\r\n                            Helper.handle(error)\r\n                            this.ausgewaehlt = false\r\n                            this.msg = \"Alle Bestellungen\"\r\n                            Helper.redirect(\"/admin/bestellungen\");\r\n                            return\r\n                        })\r\n                    }\r\n                    // offene schaeden sind vorhanden\r\n                    else{\r\n                        let val = false\r\n                        this.schaeden.push.apply(this.schaeden, response.data.cardamage)\r\n                        for(let i=0;i<this.schaeden.length;i++){\r\n                                if(this.schaeden[i].prioritaet == 0){\r\n                                if(confirm(\"Das Auto kann nicht ausgeliehen werden wegen offener fataler Probleme.\\nMoechten Sie diese jetzt bearbeiten?\")){\r\n                                    val = true\r\n                                    Helper.redirect(\"/admin/\" + date.auto_fk + \"/schaden\");\r\n                                    return\r\n                                }\r\n                                val = true\r\n                                return\r\n                            }\r\n                        }\r\n                        if(!val){\r\n                            if(confirm(\"Es bestehen noch offene Probleme, die aber nicht fatal sind. Moechten Sie die Bestellung bestaetigen\")){    \r\n                                Auth.updateStatusOrder(date.bnr, 1)\r\n                                    .then((response) =>{\r\n                                        if(response.data.success){\r\n                                            this.bestellungen.find(\r\n                                            (element) => element.bnr == date.bnr).status = 1\r\n                                            alert(\"Bestellung wurde erfolgreich bestaetigt.\")\r\n                                            Helper.redirect(\"/admin/bestellungen\");\r\n                                            this.ausgewaehlt = false\r\n                                            this.msg = \"Alle Bestellungen\"\r\n                                            return\r\n                                        }\r\n                                    })\r\n                                    .catch((error) => {\r\n                                        Helper.handle(error)\r\n                                        this.ausgewaehlt = false\r\n                                        this.msg = \"Alle Bestellungen\"\r\n                                        Helper.redirect(\"/admin/bestellungen\");\r\n                                        return\r\n                                    })\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    Helper.handle(error)\r\n                    this.ausgewaehlt = false\r\n                    this.msg = \"Alle Bestellungen\"\r\n                    Helper.redirect(\"/admin/bestellungen\");\r\n                })\r\n        },\r\n\r\n        finishOrder(bnr){\r\n            if(confirm(\"Moechten Sie die Bestellung wirklich abschliessen? Haben Sie auch das Auto auf neue Schaeden begutachtet?\")){\r\n                let zusatz = 0\r\n                let bestaetigen = false\r\n                for(let i=0; i<this.bestellkosten.length;i++){\r\n                    if(this.bestellkosten[i].typ != 0){\r\n                        zusatz += this.bestellkosten[i].menge\r\n                    }\r\n                }\r\n                if(zusatz > 0){\r\n                    if(confirm(\"Es sind noch offene Zusatzkosten in Hoehe von \" + zusatz + \"€ zu zahlen.\\nWurden diese bezahlt?\")){\r\n                        bestaetigen = true\r\n                    }\r\n                    else{\r\n                        bestaetigen = false\r\n                    }\r\n                }\r\n                else{\r\n                    bestaetigen = true\r\n                }\r\n                if(bestaetigen){\r\n                    Auth.updateStatusOrder(bnr, 4)\r\n                    .then((response) =>{\r\n                        if(response.data.success){\r\n                            Auth.updateAusleiheAuto(this.auto.name, 0)\r\n                            .then((response) =>{\r\n                                if(response.data.success){\r\n                                    this.gewaehlteBestellung.status = 4\r\n                                    this.auto.ausgeliehen = 0\r\n                                    alert(\"Auto wurde erfolgreich zurueckgegeben\")\r\n                                    return\r\n                                }\r\n                            })\r\n                            .catch((error) => {\r\n                                Helper.handle(error)\r\n                                this.ausgewaehlt = false\r\n                                this.msg = \"Alle Bestellungen\"\r\n                                Helper.redirect(\"/admin/bestellungen\");\r\n                                return\r\n                            })  \r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        Helper.handle(error)\r\n                        this.ausgewaehlt = false\r\n                        this.msg = \"Alle Bestellungen\"\r\n                        Helper.redirect(\"/admin/bestellungen\");\r\n                        return\r\n                    })  \r\n                }\r\n                else{\r\n                    this.rueckgabe(bnr)\r\n                }\r\n            }\r\n        },\r\n        // 5 zu 2, um weitere Verspaetungsgebuehren zu verhindern bzw. wenn Zusatzkosten nicht direkt durch Kunden bezahlt werden koennen (1-->2)\r\n        rueckgabe(bnr){\r\n          if(confirm(\"Wurde das Auto wirklick vom Kunden zurueckgegeben?\")){                \r\n            Auth.updateStatusOrder(bnr, 2)\r\n            .then((response) =>{\r\n                if(response.data.success){\r\n                    Auth.updateAusleiheAuto(this.auto.name, 0)\r\n                    .then((response) =>{\r\n                        if(response.data.success){\r\n                            this.gewaehlteBestellung.status = 2\r\n                            this.auto.ausgeliehen = 0\r\n                            alert(\"Auto wurde erfolgreich zurueckgegeben\")\r\n                            return\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        Helper.handle(error)\r\n                        this.ausgewaehlt = false\r\n                        this.msg = \"Alle Bestellungen\"\r\n                        Helper.redirect(\"/admin/bestellungen\");\r\n                        return\r\n                    })  \r\n                }\r\n            })\r\n            .catch((error) => {\r\n                Helper.handle(error)\r\n                this.ausgewaehlt = false\r\n                this.msg = \"Alle Bestellungen\"\r\n                Helper.redirect(\"/admin/bestellungen\");\r\n                return\r\n            })  \r\n          }\r\n        },\r\n        // mitarbeiter bestaetigt dies, wenn auto ausgeliehen u. kunde standarkosten vor ort bezahlt hat\r\n        ausleihen(auto){\r\n            let gesamt = 0\r\n            for(let i=0; i<this.bestellkosten.length;i++){\r\n                gesamt += this.bestellkosten[i].menge\r\n            }\r\n            if(confirm(\"Wurden die Kosten in Hoehe von \" + gesamt + \"€ bezahlt und ist das Auto bereit fuer die Ausleihe?\")){\r\n                Auth.updateAusleiheAuto(auto, 1)\r\n                .then((response) =>{\r\n                    if(response.data.success){\r\n                        alert(\"Das Auto kann nun ausgeliehen werden\")\r\n                        this.auto.ausgeliehen = 1\r\n                        return\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    Helper.handle(error)\r\n                    this.ausgewaehlt = false\r\n                    this.msg = \"Alle Bestellungen\"\r\n                    Helper.redirect(\"/admin/bestellungen\");\r\n                    return\r\n                })  \r\n            }\r\n        },\r\n        // test, ob bestellungen mehrfach vorhanden sind\r\n        testdoppelt(){\r\n             let verglichen = []\r\n             for(let i=0; i < this.bestellungen.length-1; i++){\r\n                let value = false\r\n                if (this.bestellungen[i].status != 0){\r\n                    continue\r\n                }\r\n                for(let j=0; j < verglichen.length; j++){\r\n                    if(verglichen[j].auto_fk == this.bestellungen[i].auto_fk){\r\n                        value = true\r\n                        break\r\n                    }\r\n                }\r\n                if(value){\r\n                    continue\r\n                }\r\n                verglichen.push(this.bestellungen[i]) \r\n                if(this.bestellungen[i].status == 0){\r\n                        for(let h=i+1; h < this.bestellungen.length; h++){\r\n                            if((this.bestellungen[i].auto_fk == this.bestellungen[h].auto_fk) && (this.bestellungen[h].status == 0)){\r\n                                verglichen.push(this.bestellungen[h])\r\n                                let startdatum = new Date(this.bestellungen[i].startdatum)\r\n                                let enddatum = new Date(this.bestellungen[i].enddatum)\r\n                                let von = new Date(this.bestellungen[h].startdatum)\r\n                                let bis = new Date(this.bestellungen[h].enddatum)\r\n                                if((enddatum.getTime() >= von.getTime()) || (enddatum.getTime() >= bis.getTime())){\r\n                                    this.bestellungen[i].doppelt = true\r\n                                    this.bestellungen[h].doppelt = true\r\n                                }\r\n                                else if((startdatum.getTime() <= von.getTime()) || (startdatum.getTime() <= bis.getTime())){\r\n                                    this.bestellungen[i].doppelt = true\r\n                                    this.bestellungen[h].doppelt = true\r\n                                }\r\n                                else if(((startdatum.getTime() <= von.getTime()) && (enddatum.getTime() >= von.getTime())\r\n                                    ||((startdatum.getTime() <= bis.getTime()) && (enddatum.getTime() >= bis.getTime()))\r\n                                    ||((startdatum.getTime() >= von.getTime()) && (enddatum.getTime() <= bis.getTime())))){\r\n                                    this.bestellungen[i].doppelt = true\r\n                                    this.bestellungen[h].doppelt = true\r\n                                }\r\n                            }\r\n                        }\r\n                }else{\r\n                    continue\r\n                }\r\n            }\r\n        },\r\n        // geladene Bestellungen werden geprueft, ob sie offen, aber schon abgelaufen sind --> automatisch abgebrochen\r\n        async testAbgelaufen(){\r\n            this.bestellungen.forEach(async (item) => {\r\n                let heute = new Date()\r\n                let start = new Date(item.startdatum)\r\n                if(start.getTime() <= heute.getTime() && item.status == '0'){\r\n                    await this.abbrechen(item.bnr, 1)\r\n                }\r\n            })\r\n            return\r\n        },\r\n        // geladene Bestellungen werden geprueft, ob sie laufend sind, aber auto noch nicht abgeholt wurde sind --> automatisch abgebrochen mit strafe\r\n        async testNichtAngetreten(){\r\n            this.bestellungen.forEach(async (item) => {\r\n                let heute = new Date()\r\n                let start = new Date(item.startdatum)\r\n                start.setDate(start.getDate() + 1);\r\n                UserService.getCar(item.auto_fk)\r\n                .then(response =>{\r\n                    let auto = response.data.car \r\n                    if(start.getTime() <= heute.getTime() && item.status == '1' && auto.ausgeliehen == 0){\r\n                         let bestellkosten = []\r\n                         UserService.getOrderCost(item.bnr)\r\n                        .then((response) => {\r\n                            response.data.costs.forEach((cost) => {\r\n                                bestellkosten.push(cost)\r\n                            })\r\n                            this.abbrechen(item.bnr, 1, auto, bestellkosten)\r\n                        })\r\n                        .catch((error) => {\r\n                            Helper.handle(error)\r\n                            this.ausgewaehlt = false\r\n                            this.msg = \"Alle Bestellungen\"\r\n                            Helper.redirect(\"/admin/bestellungen/\");\r\n                        })\r\n                    }\r\n                })\r\n                .catch((error) => {\r\n                    Helper.handle(error)\r\n                    this.ausgewaehlt = false\r\n                    this.msg = \"Alle Bestellungen\"\r\n                    Helper.redirect(\"/admin/bestellungen/\");\r\n                })\r\n                \r\n            })\r\n            return\r\n        },\r\n        // geladene Bestellungen werden geprueft, ob sie laufend sind, aber es zu Verspätung bei Autoabgabe durch Kunden kam\r\n        async testVerspeatung(){\r\n            this.bestellungen.forEach(async (item) => {\r\n                let heute = new Date()\r\n                let enddatum = new Date(item.enddatum) \r\n                // nur bestellungen, wo auto noch nicht abgegeben wurde\r\n                if(enddatum.getTime() < heute.getTime() && (item.status == '1' || item.status == '5')){\r\n                    let oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds\r\n                    let diffDays = Math.floor((heute.getTime() - enddatum.getTime())/(oneDay))\r\n                    await this.setzeVerspaetung(item.bnr, diffDays, item.auto_fk)\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                Helper.handle(error);\r\n                this.ausgewaehlt = false\r\n                this.msg = \"Alle Bestellungen\"\r\n                Helper.redirect(\"/admin/bestellungen\");\r\n            });\r\n            return\r\n        },\r\n        // Preis anpassen je nach ueberzogener Tage\r\n        async setzeVerspaetung(bnr, tage, autoname){\r\n            UserService.getCar(autoname)\r\n                .then(response =>{\r\n                   let auto = response.data.car\r\n                   let ueberzugsgebuehren = auto.preis * tage\r\n                   if(auto.ausgeliehen){       \r\n                        Auth.addCost(bnr, 3, ueberzugsgebuehren, tage + ' Tage Verspaetete Abgabe Auto')\r\n                        .then(response =>{\r\n                            if(response.data.success){\r\n                                if(response.data.changed){\r\n                                    if(this.bestellkosten.length > 0){\r\n                                        let kosten = this.bestellkosten.find(\r\n                                                (element) => element.bnr == bnr && element.pos == response.data.pos)\r\n                                        kosten.menge = ueberzugsgebuehren\r\n                                        kosten.beschreibung = tage + ' Tage Verspaetete Abgabe Auto'\r\n                                    }\r\n                                }\r\n                                else{\r\n                                    this.bestellkosten.push(response.data.cost)\r\n                                }\r\n                                Auth.updateStatusOrder(bnr, 5)\r\n                                .then((response) =>{\r\n                                    if(response.data.success){\r\n                                        this.bestellungen.find(\r\n                                        (element) => element.bnr == bnr).status = 5\r\n                                        return\r\n                                    }\r\n                                })\r\n                                .catch((error) => {\r\n                                    Helper.handle(error)\r\n                                    this.ausgewaehlt = false\r\n                                    this.msg = \"Alle Bestellungen\"\r\n                                    Helper.redirect(\"/admin/bestellungen\");\r\n                                    return\r\n                                })  \r\n                            }\r\n                        })\r\n                        .catch((error) => {\r\n                            Helper.handle(error)\r\n                            this.ausgewaehlt = false\r\n                            this.msg = \"Alle Bestellungen\"\r\n                            Helper.redirect(\"/admin/bestellungen\");\r\n                            return\r\n                        })\r\n                   }\r\n                })\r\n                .catch((error) => {\r\n                    Helper.handle(error)\r\n                    this.ausgewaehlt = false\r\n                    this.msg = \"Alle Bestellungen\"\r\n                    Helper.redirect(\"/admin/bestellungen\");\r\n                    return\r\n                })\r\n        },\r\n        \r\n        async holeAuto(autoname){\r\n            UserService.getCar(autoname)\r\n            .then(response =>{\r\n                this.auto = response.data.car \r\n            })\r\n            .catch((error) => {\r\n                Helper.handle(error)\r\n                this.ausgewaehlt = false\r\n                this.msg = \"Alle Bestellungen\"\r\n                Helper.redirect(\"/admin/bestellungen/\");\r\n            })\r\n        },\r\n        holeKosten(bnr){\r\n            this.bestellkosten = []\r\n            UserService.getOrderCost(bnr)\r\n                .then((response) => {\r\n                    response.data.costs.forEach((cost) => {\r\n                        this.bestellkosten.push(cost)\r\n                    })\r\n                })\r\n                .catch((error) => {\r\n                    Helper.handle(error)\r\n                    this.ausgewaehlt = false\r\n                    this.msg = \"Alle Bestellungen\"\r\n                    Helper.redirect(\"/admin/bestellungen/\");\r\n                })\r\n        },\r\n        // faerbe tabelle, wenn doppelte bestellung\r\n        getClass(bestellung) {\r\n              if (bestellung.doppelt) {\r\n                this.class=\"doppelt\"\r\n                return this.class\r\n              }\r\n              else if (bestellung.status == 2) {\r\n                this.class = \"bezahlen\"\r\n                return this.class\r\n              }\r\n              else{\r\n                this.class = \"normal\"\r\n                return this.class\r\n              }\r\n        },\r\n        // zur detaillierten Bestellübersicht wechseln\r\n        editingOrder(bnr){\r\n            this.ausgewaehlt = true;\r\n            this.msg = \"Bestellung: \" + bnr\r\n            this.gewaehlteBestellung = this.bestellungen.find(\r\n            (element) => element.bnr == bnr)\r\n            this.holeKosten(bnr)\r\n            this.holeAuto(this.gewaehlteBestellung.auto_fk).then(\r\n                this.$router.push(\"/admin/bestellungen/\" + bnr)\r\n            )\r\n        },\r\n        // alle bestellungen von backend holen\r\n        holeBestellungen(typ){\r\n            if (this.bestellungen.length < 1) {\r\n                let bestelltyp = ''\r\n                if(typ == 7){\r\n                    bestelltyp = \"geschlossen\"\r\n                }\r\n                else if(typ == 6){\r\n                    bestelltyp = \"offen \" + 0\r\n                }\r\n                else if(typ == 8 || typ == 9){\r\n                    bestelltyp = \"alle\"\r\n                }\r\n                else{\r\n                    bestelltyp = \"offen \" + typ\r\n                }\r\n                UserService.getOrder(bestelltyp)\r\n                .then((response) => {\r\n                    response.data.orders.forEach((order) => {\r\n                        order.doppelt = false\r\n                        this.bestellungen.push(order)\r\n                    })\r\n                    if(typ == 0 || typ == 6|| typ == 8){\r\n                        this.testdoppelt()\r\n                    } \r\n                    //nur doppelte anzeigen\r\n                    if(typ == 6){\r\n                        let bestellungen = []\r\n                        for(let i=0;i<this.bestellungen.length;i++){\r\n                             if(this.bestellungen[i].doppelt){\r\n                                 bestellungen.push(this.bestellungen[i])\r\n                             }\r\n                        }\r\n                        this.bestellungen = bestellungen\r\n                    }\r\n                    // wenn einzelne bestellung angesehen wird, muessen alle bestellungen geladen werden\r\n                    //um moegliche konflikte zu sehen u. auch spezifische bestellung zu finden\r\n                    if(typ == 9){\r\n                        this.gewaehlteBestellung = this.bestellungen.find(\r\n                        (element) => element.bnr == this.$route.params.bnr)\r\n                        this.holeKosten(this.$route.params.bnr)\r\n                        this.holeAuto(this.gewaehlteBestellung.auto_fk)\r\n                    }\r\n                    this.gesuchteBestellungen = this.bestellungen\r\n                     this.testVerspeatung().then(\r\n                        this.testAbgelaufen().then(\r\n                            this.testNichtAngetreten().then()(\r\n                                this.gesuchteBestellungen = this.bestellungen,\r\n                                // filter automatisch auf geladene datensaetze angewandt\r\n                                this.suchen()\r\n                            )\r\n                        )\r\n                    ) \r\n                })\r\n                .catch((error) => {\r\n                    Helper.handle(error)\r\n                    Helper.redirect(\"/admin\")\r\n                })\r\n               \r\n            }\r\n        },\r\n         // status in text umwandeln\r\n          status(status) {\r\n           if(status == 0){\r\n              return 'Wartet auf Bestaetigung'\r\n           }\r\n           else if(status == 1){\r\n               return 'Laufende Bestellung'\r\n           }\r\n           else if(status == 2){\r\n               return 'Bezahlung ausstehend'\r\n           }\r\n           else if(status == 3){\r\n               return 'Abgebrochene Bestellung'\r\n           }\r\n           else if(status == 4){\r\n               return 'Erfolgreich abgeschlossene Bestellung'\r\n           }\r\n           else if(status == 5){\r\n               return 'Überfällige Bestellung'\r\n           }\r\n        }   \r\n    },\r\n\r\n    computed: {\r\n        gesamtkosten(){\r\n            if(this.bestellkosten.length > 0){\r\n                let gesamt = 0\r\n                for(let i=0; i<this.bestellkosten.length;i++){\r\n                    gesamt += this.bestellkosten[i].menge\r\n                }\r\n                return gesamt\r\n            }\r\n            else{\r\n                return ''\r\n            }\r\n        }\r\n    },\r\n    beforeMount(){     \r\n        let heute = new Date()\r\n        this.datepickerSetting.value = Helper.formatDate(heute)\r\n                                                           //0                       3,4                   2                           5                   doppelt = true              1\r\n        this.bestellungstypen = [\"Alle Bestellungen\", \"Offene Bestellanfragen\", \"Bestellungshistorie\", \"Offene Bezahlung\", \"Ueberzogene Bestellungen\",\"Doppelte Bestellungen\", \"Laufende Bestellungen\"];\r\n        if (this.$route.params.bnr != \"\") {\r\n            this.ausgewaehlt = true\r\n            this.msg = \"Bestellung: \" + this.$route.params.bnr\r\n            this.holeBestellungen(9)\r\n        }\r\n        else{\r\n            this.ausgewaehlt = false\r\n            this.msg = \"Alle Bestellungen\"\r\n            this.holeBestellungen(0)\r\n        }\r\n    }\r\n}\r\n \r\n</script>\r\n\r\n<style scoped>\r\n/* .ma{\r\n    background-color: cornflowerblue;\r\n    background-size: 100% 100%;\r\n    min-height: 200%;\r\n\r\n\r\n} */\r\n\r\np{\r\n    color:white;\r\n    text-align: center;\r\n    font-size: small;\r\n}\r\n\r\n.doppelt{\r\n    background-color: red\r\n}\r\n.bezahlen {\r\n    background-color: orange\r\n}\r\n.normal {\r\n    background-color: rgb(193, 197, 233)\r\n}\r\ntable, th, td {\r\n  border: 1px solid black;\r\n  border-collapse: collapse;\r\n  padding: 15px;\r\n  border-spacing: 5px;\r\n  width: 100%;\r\n}\r\nbutton{\r\n  box-shadow: 0px 0px 0px 2px #9fb4f2;\r\n\t/* background:linear-gradient(to bottom, #7892c2 5%, #476e9e 100%);\r\n\tbackground-color:#7892c2;\r\n\tborder-radius:10px;\r\n\tborder:1px solid #4e6096;\r\n\tdisplay:inline-block;\r\n\tcursor:pointer; */\r\n\tcolor:#ffffff;\r\n\tfont-family:Arial;\r\n\tfont-size:14px;\r\n\tpadding:20px 40px 20px;\r\n\ttext-decoration:none;\r\n\ttext-shadow:0px 1px 0px #283966;\r\n  align-content: center;\r\n  width: 20%;\r\n}\r\n\r\n</style>\r\n"],"sourceRoot":""}]}