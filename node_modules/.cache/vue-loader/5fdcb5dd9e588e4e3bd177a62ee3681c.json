{"remainingRequest":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\CarDamage.vue?vue&type=style&index=0&id=5614d6e3&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\CarDamage.vue","mtime":1609762382442},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpwew0KICAgIGNvbG9yOndoaXRlOw0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBmb250LXNpemU6IHNtYWxsOw0KfQ0KdGFibGUsIHRoLCB0ZCB7DQogIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrOw0KICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOw0KICBwYWRkaW5nOiAxNXB4Ow0KICBib3JkZXItc3BhY2luZzogNXB4Ow0KICB3aWR0aDogMTAwJTsNCn0NCmJ1dHRvbnsNCiAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggMnB4ICM5ZmI0ZjI7DQoJYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCAjNzg5MmMyIDUlLCAjNDc2ZTllIDEwMCUpOw0KCWJhY2tncm91bmQtY29sb3I6Izc4OTJjMjsNCglib3JkZXItcmFkaXVzOjEwcHg7DQoJYm9yZGVyOjFweCBzb2xpZCAjNGU2MDk2Ow0KCWRpc3BsYXk6aW5saW5lLWJsb2NrOw0KCWN1cnNvcjpwb2ludGVyOw0KCWNvbG9yOiNmZmZmZmY7DQoJZm9udC1mYW1pbHk6QXJpYWw7DQoJZm9udC1zaXplOjlweDsNCglwYWRkaW5nOjIwcHggNDBweCAyMHB4Ow0KCXRleHQtZGVjb3JhdGlvbjpub25lOw0KCXRleHQtc2hhZG93OjBweCAxcHggMHB4ICMyODM5NjY7DQogIGFsaWduLWNvbnRlbnQ6IGNlbnRlcjsNCiAgdGV4dC1zaXplLWFkanVzdDogYXV0bzsNCiAgd2lkdGg6IDIwJTsNCn0NCmgxew0KICAgIGNvbG9yOiByZ2IoMTA2LCAxNjcsIDI2KTsNCn0NCmgyew0KICBjb2xvcjpidXJseXdvb2QNCn0NCmgzew0KICBjb2xvcjogYXF1YTsNCn0NCmlucHV0W3R5cGU9dGV4dF0sIHNlbGVjdCB7DQogIHdpZHRoOiAyNSU7DQogIHBhZGRpbmc6IDEycHggMjBweDsNCiAgbWFyZ2luOiA4cHggMDsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQp9DQoNCg=="},{"version":3,"sources":["C:\\Users\\coanh\\OneDrive\\Documents\\SW-Projekt\\Auto\\Autovermietung\\Autovermietung\\src\\components\\CarDamage.vue"],"names":[],"mappings":"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","file":"C:/Users/coanh/OneDrive/Documents/SW-Projekt/Auto/Autovermietung/Autovermietung/src/components/CarDamage.vue","sourceRoot":"","sourcesContent":["<template>\r\n    <div>\r\n        <h1> {{msg}} </h1>\r\n         <textarea v-model=\"beschreibung\" placeholder=\"Beschreibung des Schadens\" name=\"text\" cols=\"35\" rows=\"4\">Schaden hier beschreiben</textarea> \r\n          <input\r\n          type=\"text\"\r\n          placeholder=\"Kosten\"\r\n          v-model=\"kosten\"\r\n          required\r\n          autofocus\r\n         />\r\n        <select v-model=\"auswahl\">\r\n          <option value=\"\" disabled selected>Schadenstyp</option>\r\n          <option\r\n            v-for=\"(schaden, index) in schadenstypen\"\r\n            :key=\"index\"\r\n            :value=\"schaden\"\r\n          >\r\n          {{schaden}}\r\n          </option>\r\n        </select>\r\n        <select v-model=\"auswahlPrio\" v-if=\"!testTank()\">\r\n            <option value=\"\" disabled selected>Schadensausmaß</option>\r\n            <option\r\n                v-for=\"(typ, index) in prioTypen\"\r\n                :key=\"index\"\r\n                :value=\"typ\"\r\n            >\r\n            {{typ}}\r\n            </option>\r\n         </select>\r\n         <select v-model=\"auswahlPrio\" v-else>\r\n            <option value=\"\" disabled selected>Schadensausmaß</option>\r\n            <option value=\"Fatal\" >Fatal</option>\r\n         </select>\r\n        <button type=\"submit\" @click=\"erstelleSchaden()\">Erstellen</button>\r\n        <div v-if=\"allgemein\">\r\n         <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Beschreibung</th>\r\n                        <th>Typ</th>\r\n                        <th>Prioritaet</th>\r\n                        <th>Kosten in €</th>\r\n                        <th>Bestellung</th>\r\n                        <th>Abgearbeitet?</th>\r\n                        <th>Loeschen</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(schaden, index) in schaeden\" :key=\"index\">\r\n                        <td>{{schaden.beschreibung}}</td>\r\n                        <td>{{reverseTyp(schaden.typ)}}</td>\r\n                        <td>{{reversePrio(schaden.prioritaet)}}</td>\r\n                        <td>{{schaden.hoehe}}</td>\r\n                        <td>{{schaden.bnr_fk}}</td>\r\n                        <td><button @click=\"updateCheck(schaden)\">Problem beheben</button></td>\r\n                        <td><button @click=\"loescheSchaden(schaden)\">Loeschen</button></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <div v-else>\r\n                  <table>\r\n                <thead>\r\n                    <tr>\r\n                        <th>Beschreibung</th>\r\n                        <th>Typ</th>\r\n                        <th>Prioritaet</th>\r\n                        <th>Kosten in €</th>\r\n                        <th>Loeschen</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(schaden, index) in schaeden\" :key=\"index\">\r\n                        <td>{{schaden.beschreibung}}</td>\r\n                        <td>{{reverseTyp(schaden.typ)}}</td>\r\n                        <td>{{reversePrio(schaden.prioritaet)}}</td>\r\n                        <td>{{schaden.hoehe}}</td>\r\n                        <td><button @click=\"loescheSchaden(schaden)\">Loeschen</button></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>  \r\n        <button type=\"cancel\" @click=\"back\">Zurueck zum Start</button>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport UserService from \"../services/user.service\";\r\nimport Auth from \"../services/auth.service\";\r\nimport Helper from \"../services/helper.service\";\r\nexport default {\r\n    data(){\r\n        return{\r\n            msg: '',\r\n            auswahl: '',\r\n            auswahlPrio: '',\r\n            beschreibung: '',\r\n            kosten: '',\r\n            allgemein: '',\r\n            schaeden: [],\r\n            schadenstypen: [],\r\n            prioTypen: []\r\n        }\r\n    },\r\n    methods: {\r\n        back() {\r\n            this.$router.push(\"/admin/bestellungen\")\r\n        },\r\n        // nur schaden wird allgemein geloescht\r\n        loescheSchaden(schaden){\r\n            let wert = ''\r\n            if(this.allgemein){\r\n                wert = \"Moechten Sie den Schaden wirklich loeschen?\"\r\n            }\r\n            else{\r\n                wert = \"Moechten Sie den Schaden wirklich loeschen? Es werden auch die dazugehoergien Kosten aus der Bestellung geloescht\"\r\n            }\r\n            if(confirm(wert)){\r\n                Auth.deleteSchaden(schaden.auto_fk, schaden.pos)\r\n                    .then((response) =>{\r\n                        if(response.data.success){\r\n                            // schaden lokal aus array entfernen --> \"aktualisieren\"\r\n                            let index = this.schaeden.indexOf(schaden)\r\n                            this.schaeden.splice(index, 1);\r\n                            alert(\"Schaden wurde erfolgreich behoben\")\r\n                            if(response.data.cost){\r\n                                alert(\"Die dazugehoerigen Kosten wurden aus der Bestellung geloescht\")\r\n                            }\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        Helper.handle(error)\r\n                        Helper.redirect(\"/admin\");\r\n                    })\r\n            }\r\n        },\r\n        testTank(){\r\n            if(this.auswahl == 'Tank'){\r\n                this.auswahlPrio = 'Fatal'\r\n                return true\r\n            }\r\n            else{\r\n                return false\r\n            }\r\n        },\r\n        updateCheck(schaden){\r\n            if(confirm(\"Ist der Schaden wirklich behoben?\")){\r\n                 Auth.updatePriority(schaden.auto_fk, schaden.pos, -1, schaden.bnr_fk)\r\n                    .then((response) =>{\r\n                        if(response.data.success){\r\n                            // schaden lokal aus array entfernen --> \"aktualisieren\"\r\n                            let index = this.schaeden.indexOf(schaden)\r\n                            this.schaeden.splice(index, 1);\r\n                            alert(\"Schaden wurde erfolgreich behoben\")\r\n                            if(response.data.verfuegbar){\r\n                                alert(\"Das Auto ist wieder fuer die Vermietung verfuegbar\")\r\n                            }\r\n                        }\r\n                    })\r\n                    .catch((error) => {\r\n                        Helper.handle(error)\r\n                        Helper.redirect(\"/admin\");\r\n                    })\r\n                }\r\n        },\r\n        status(status) {\r\n            if(status == 'Tank'){\r\n                return 1\r\n            }\r\n            else if(status == 'Sauberkeit'){\r\n                return 2\r\n            }\r\n            else if(status == 'Beschaedigung'){\r\n                return 4\r\n            }\r\n        }, \r\n        reverseTyp(typ){\r\n           if(typ == 1){\r\n              return 'Tank'\r\n           }\r\n           else if(typ == 2){\r\n               return 'Sauberkeit'\r\n           }\r\n           else if(typ == 4){\r\n               return 'Beschaedigung'\r\n           }\r\n        },\r\n        prio(typ) {\r\n            if(typ == 'Gering'){\r\n                return 3\r\n            }\r\n            else if(typ == 'Mittel'){\r\n                return 2\r\n            }\r\n            else if(typ == 'Groß'){\r\n                return 1\r\n            }\r\n            else if(typ == \"Fatal\"){\r\n                return 0\r\n            }\r\n        }, \r\n        reversePrio(prio){\r\n           if(prio == 0){\r\n              return 'Fatal'\r\n           }\r\n           else if(prio == 1){\r\n               return 'Groß'\r\n           }\r\n           else if(prio == 2){\r\n               return 'Mittel'\r\n           }\r\n           else if(prio == 3){\r\n               return 'Gering'\r\n           }\r\n        },\r\n        erstelleSchaden(){\r\n            if(this.auswahl != '' && this.beschreibung != '' && this.auswahlPrio != '' && this.kosten != ''){\r\n                var zahlentester = new RegExp(\"^[0-9 ]*$\")\r\n                let val = this.prio(this.auswahlPrio)\r\n                if(zahlentester.test(this.kosten) && this.kosten >= 0){\r\n                    // wenn bnr vorhanden, dann werden kosten hinzugefuegt + schaden mit bestellung verknuepft\r\n                    if(!this.allgemein){\r\n                        Auth.addCost(this.$route.params.bnr, this.status(this.auswahl), this.kosten, this.beschreibung)\r\n                        .then((response) =>{\r\n                            if(response.data.success){\r\n                                let pos_fk = response.data.cost.pos\r\n                                Auth.addBnrToSchaden(this.$route.params.autoname, this.beschreibung, val, this.status(this.auswahl), this.kosten, this.$route.params.bnr, pos_fk)\r\n                                .then((response) =>{\r\n                                    if(response.data.success){\r\n                                        if(response.data.verfuegbar == false){\r\n                                            alert(\"Das Auto ist erst wieder vefuegbar fuer die Vermietung, wenn dieser Schaden behoben wurde\")\r\n                                        }\r\n                                        this.schaeden.push({auto_fk: this.$route.params.autoname, pos: response.data.pos, beschreibung: this.beschreibung, prioritaet: this.prio(this.auswahlPrio), typ:this.status(this.auswahl), hoehe: this.kosten, bnr_fk: this.$route.params.bnr, pos_fk: pos_fk})\r\n                                        this.auswahlPrio = ''\r\n                                        this.kosten = ''\r\n                                        this.beschreibung = ''\r\n                                        this.auswahl = ''\r\n                                        alert(\"Schaden erfolgreich hinzugefuegt\")\r\n                                    }\r\n                                })\r\n                                .catch((error) => {\r\n                                    Helper.handle(error)\r\n                                    Helper.redirect(\"/admin\");\r\n                                })\r\n                            }\r\n                        })\r\n                        .catch((error) => {\r\n                            Helper.handle(error)\r\n                            Helper.redirect(\"/admin\");\r\n                        })\r\n                    }\r\n                    // nur schaden hinzufuegen\r\n                    else{\r\n                        Auth.addSchaden(this.$route.params.autoname, this.beschreibung, val, this.status(this.auswahl), this.kosten)\r\n                        .then((response) =>{\r\n                            if(response.data.success){\r\n                                if(response.data.verfuegbar == false){\r\n                                    alert(\"Das Auto ist erst wieder vefuegbar fuer die Vermietung, wenn dieser Schaden behoben wurde\")\r\n                                }\r\n                                this.schaeden.push({auto_fk: this.$route.params.autoname, pos: response.data.pos, beschreibung: this.beschreibung, prioritaet: this.prio(this.auswahlPrio), typ:this.status(this.auswahl), hoehe: this.kosten})\r\n                                this.auswahlPrio = ''\r\n                                this.kosten = ''\r\n                                this.beschreibung = ''\r\n                                this.auswahl = ''\r\n                                alert(\"Schaden erfolgreich hinzugefuegt\")\r\n                            }\r\n                        })\r\n                        .catch((error) => {\r\n                            Helper.handle(error)\r\n                            Helper.redirect(\"/admin\");\r\n                        })\r\n                    }\r\n                }\r\n                else{\r\n                    this.kosten = ''\r\n                    alert(\"Kosten muss positive Zahl sein\")\r\n                }\r\n            }\r\n            else{\r\n                alert(\"Alle Felder muessen ausgefuellt sein\")\r\n            }\r\n        }\r\n\r\n    },\r\n    beforeMount(){\r\n        // kann ohne oder mit bestellungsreferenz aufrufen --> mit referenz kann schaden hinzugefuegt werden\r\n        this.prioTypen = [\"Gering\", \"Mittel\", \"Groß\", \"Fatal\"]\r\n        this.schadenstypen = [\"Beschaedigung\", \"Tank\", \"Sauberkeit\"]\r\n        if(!this.$route.params.bnr){\r\n            this.allgemein = true\r\n            this.msg = \"Uebersicht Schaeden Auto: \" + this.$route.params.autoname\r\n            //hier schaeden holen fuer auto\r\n            UserService.getSchaeden(this.$route.params.autoname)\r\n            .then((response) =>{\r\n                this.schaeden.push.apply(this.schaeden, response.data.cardamage)    \r\n            })\r\n            .catch((error) => {\r\n                Helper.handle(error)\r\n                Helper.redirect(\"/admin\");\r\n            })\r\n        }\r\n        else{\r\n            this.allgemein = false\r\n            this.msg = \"Uebersicht Schaeden Auto: \" + this.$route.params.autoname + \" BNR: \" + this.$route.params.bnr\r\n            //hier noch testen, ob es zu bnr auch noch bestellung mit passender auto_fk gibt\r\n            //--> nur schaden holen, die auch dazugehoerige kosten in kosten-tabelle haben\r\n            UserService.getDamageCost(this.$route.params.bnr, this.$route.params.autoname)\r\n            .then((response) => {\r\n                if(response.data.success){\r\n                    this.schaeden.push.apply(this.schaeden, response.data.schaeden)    \r\n                }\r\n                else{\r\n                    alert(\"Die Bestellung BNR: \" + this.$route.params.bnr + \" ist ungueltig/nicht mehr vorhanden/bereits abgeschlossen\")\r\n                    Helper.redirect(\"/admin\");\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                Helper.handle(error);\r\n                this.ausgewaehlt = false;\r\n                this.msg = \"\"\r\n                Helper.redirect(\"/admin/bestellungen\")\r\n            })  \r\n        }\r\n    }\r\n}\r\n \r\n</script>\r\n\r\n<style scoped>\r\np{\r\n    color:white;\r\n    text-align: center;\r\n    font-size: small;\r\n}\r\ntable, th, td {\r\n  border: 1px solid black;\r\n  border-collapse: collapse;\r\n  padding: 15px;\r\n  border-spacing: 5px;\r\n  width: 100%;\r\n}\r\nbutton{\r\n  box-shadow: 0px 0px 0px 2px #9fb4f2;\r\n\tbackground:linear-gradient(to bottom, #7892c2 5%, #476e9e 100%);\r\n\tbackground-color:#7892c2;\r\n\tborder-radius:10px;\r\n\tborder:1px solid #4e6096;\r\n\tdisplay:inline-block;\r\n\tcursor:pointer;\r\n\tcolor:#ffffff;\r\n\tfont-family:Arial;\r\n\tfont-size:9px;\r\n\tpadding:20px 40px 20px;\r\n\ttext-decoration:none;\r\n\ttext-shadow:0px 1px 0px #283966;\r\n  align-content: center;\r\n  text-size-adjust: auto;\r\n  width: 20%;\r\n}\r\nh1{\r\n    color: rgb(106, 167, 26);\r\n}\r\nh2{\r\n  color:burlywood\r\n}\r\nh3{\r\n  color: aqua;\r\n}\r\ninput[type=text], select {\r\n  width: 25%;\r\n  padding: 12px 20px;\r\n  margin: 8px 0;\r\n  display: inline-block;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  box-sizing: border-box;\r\n}\r\n\r\n</style>\r\n"]}]}